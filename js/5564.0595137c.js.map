{"version":3,"file":"js/5564.0595137c.js","mappings":"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","sources":["webpack://opencdms-app/./src/models/Source.js","webpack://opencdms-app/./src/views/forms/source.vue","webpack://opencdms-app/./src/web-components/forms/source.vue","webpack://opencdms-app/./src/web-components/forms/source.vue?a621","webpack://opencdms-app/./src/views/forms/source.vue?cc6c"],"sourcesContent":["import { Model } from 'pinia-orm'\nimport LinksType from '@/models/LinksType';\nimport SourceType from '@/models/SourceType';\nimport User from '@/models/User';\nimport Status from '@/models/Status';\n\nexport default class Source extends Model {\n  static entity = 'source';\n  static fields() {\n    return {\n      id: this.string(''),\n      name: this.string(''),\n      description: this.string(''),\n      source_type_id: this.string(''),\n      source_type: this.belongsTo(SourceType,'source_type_id'),\n      links: this.attr(new LinksType([])),\n      processor: this.string(''),\n      _version: this.number(null),\n      _change_date: this.string(''),\n      _user_id: this.string(''),\n      _user: this.belongsTo(User,'_user_id'),\n      _status_id: this.string(''),\n      _status: this.belongsTo(Status,'_status_id'),\n      comments: this.string('')\n    };\n  };\n};\n\n","<template>\n  <div>\n    <Source/>\n  </div>\n</template>\n\n<script>\nimport Source from '@/web-components/forms/source.vue';\n\nexport default {\n  name: 'sourceForm',\n  components: {\n    Source\n  },\n};\n</script>\n\n<style>\n</style>\n","<template>\n  <v-card>\n    <v-card-title>Create new 'Source'</v-card-title>\n    <v-card-text>\n        <v-form>\n            <v-card-item><v-text-field label=\"id\" v-model=\"source.id\"  hint=\"ID / primary key\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"name\" v-model=\"source.name\"  hint=\"Name of source\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"description\" v-model=\"source.description\"  hint=\"Description of source type, e.g. file etc\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-select :items=\"sourceTypeOptions\" item-title=\"name\" item-value=\"id\" label=\"source_type\" v-model=\"source.source_type\" :hint=\"sourceTypeOptionsHint\" return-object persistent-hint></v-select></v-card-item>\n            <v-card-item><LinkForm :links=\"links\" @updateLinks=\"updateLinks\" ></LinkForm></v-card-item>\n            <v-card-item><v-text-field label=\"processor\" v-model=\"source.processor\"  hint=\"Name of processor used to ingest the data\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"_version\" v-model=\"source._version\" type=\"number\" hint=\"Version number of this record\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><VueDatePicker label=\"_change_date\" v-model=\"source._change_date\"  hint=\"Date this record was changed\" persistent-hint></VueDatePicker></v-card-item>\n            <v-card-item><v-select :items=\"userOptions\" item-title=\"name\" item-value=\"id\" label=\"user\" v-model=\"source._user\" :hint=\"userOptionsHint\" return-object persistent-hint></v-select></v-card-item>\n            <v-card-item><v-select :items=\"statusOptions\" item-title=\"name\" item-value=\"id\" label=\"status\" v-model=\"source._status\" :hint=\"statusOptionsHint\" return-object persistent-hint></v-select></v-card-item>\n            <v-card-item><v-text-field label=\"comments\" v-model=\"source.comments\"  hint=\"Free text comments on this record, for example description of changes made etc\" persistent-hint></v-text-field></v-card-item>\n        </v-form>\n        <v-btn @click=\"createSource\">Create Source</v-btn>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport { defineComponent, ref, computed } from 'vue';\nimport { VCard, VCardTitle, VCardText, VCardItem, VForm, VTextField, VSelect, VBtn } from 'vuetify/lib/components';\nimport { onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted, onErrorCaptured} from 'vue';\nimport {useStore} from 'pinia';\nimport {useRepo} from 'pinia-orm';\n\nimport LinkForm from '@/web-components/forms/links';\nimport VueDatePicker from '@/web-components/pickers/date-picker.vue';\n\n\nimport SourceType from '@/models/SourceType';\nimport User from '@/models/User';\nimport Status from '@/models/Status';\n\n// import model\nimport Source from '@/models/Source';\n\nexport default defineComponent({\n  name: 'SourceForm',\n  props: {\n  },\n  methods:{\n    parseLinks (links) {\n      let res;\n      if( links && links.length > 0 ){\n        res = JSON.stringify(links);\n      }else{\n        res = '';\n      }\n      return res;\n    }\n  },\n  components: {\n    VCard,\n    VCardTitle,\n    VCardText,\n    VCardItem,\n    VTextField,\n    VSelect,\n    VForm,\n    VBtn,\n    VueDatePicker,\n    LinkForm\n  },\n  setup() {\n\n    // set up links object\n    const links = ref([]);\n    const updateLinks = (updatedLinks) => {\n      console.log(\"updating links\");\n      source.value.links = updatedLinks;\n    }\n\n    // set up repos\n    const sourceTypeRepo = useRepo(SourceType);\n    const sourceTypeOptions = computed(() => { return sourceTypeRepo.all() });\n    const sourceTypeOptionsHint = computed(() => {\n      if( source.value.source_type !== null ){\n        if ( 'description' in source.value.source_type ){\n          return source.value.source_type.description;\n        }else{\n          return \"\";\n        }\n      }else{\n        return \"Select source_type\";\n      }\n    } );\n    const userRepo = useRepo(User);\n    const userOptions = computed(() => { return userRepo.all() });\n    const userOptionsHint = computed(() => {\n      if( source.value._user !== null ){\n        if ( 'description' in source.value._user ){\n          return source.value._user.description;\n        }else{\n          return \"\";\n        }\n      }else{\n        return \"Select user\";\n      }\n    } );\n    const statusRepo = useRepo(Status);\n    const statusOptions = computed(() => { return statusRepo.all() });\n    const statusOptionsHint = computed(() => {\n      if( source.value._status !== null ){\n        if ( 'description' in source.value._status ){\n          return source.value._status.description;\n        }else{\n          return \"\";\n        }\n      }else{\n        return \"Select status\";\n      }\n    } );\n\n    const sourceRepo = useRepo(Source);\n    const source = ref(sourceRepo.make());\n\n    // function to create new object and to add to store\n    const createSource = async () => {\n        let valueToSave = {};\n        Object.assign(valueToSave,source.value);\n        await sourceRepo.save(valueToSave);\n        resetSource();\n    };\n\n    const resetSource = () => {\n        Object.assign(source.value, sourceRepo.make() );\n    };\n\n    return {\n        source,\n        createSource,\n        resetSource,\n        links,\n        updateLinks,\n        sourceTypeOptions, sourceTypeOptionsHint,\n        userOptions, userOptionsHint,\n        statusOptions, statusOptionsHint\n    }\n  }\n});\n</script>\n","import { render } from \"./source.vue?vue&type=template&id=e14f0766\"\nimport script from \"./source.vue?vue&type=script&lang=js\"\nexport * from \"./source.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./source.vue?vue&type=template&id=2f784d37\"\nimport script from \"./source.vue?vue&type=script&lang=js\"\nexport * from \"./source.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Source","Model","static","id","this","string","name","description","source_type_id","source_type","belongsTo","SourceType","links","attr","LinksType","processor","_version","number","_change_date","_user_id","_user","User","_status_id","_status","Status","comments","_createElementBlock","_createVNode","_component_Source","_createBlock","_component_v_card","_component_v_card_title","_component_v_card_text","_component_v_form","_component_v_card_item","_component_v_text_field","label","_ctx","hint","_component_v_select","items","_component_LinkForm","onUpdateLinks","type","_component_VueDatePicker","_component_v_btn","onClick","defineComponent","props","methods","parseLinks","res","length","JSON","stringify","components","VCard","VCardTitle","VCardText","VCardItem","VTextField","VSelect","VForm","VBtn","VueDatePicker","LinkForm","setup","ref","updateLinks","updatedLinks","console","log","source","value","sourceTypeRepo","useRepo","sourceTypeOptions","computed","all","sourceTypeOptionsHint","userRepo","userOptions","userOptionsHint","statusRepo","statusOptions","statusOptionsHint","sourceRepo","make","createSource","async","valueToSave","Object","assign","save","resetSource","__exports__","render"],"sourceRoot":""}