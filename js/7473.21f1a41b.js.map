{"version":3,"file":"js/7473.21f1a41b.js","mappings":"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","sources":["webpack://opencdms-app/./src/models/Media.js","webpack://opencdms-app/./src/views/forms/media.vue","webpack://opencdms-app/./src/web-components/forms/media.vue","webpack://opencdms-app/./src/web-components/forms/media.vue?c76d","webpack://opencdms-app/./src/views/forms/media.vue?c166"],"sourcesContent":["import { Model } from 'pinia-orm'\nimport LinksType from '@/models/LinksType';\nimport MediaType from '@/models/MediaType';\n\nexport default class Media extends Model {\n  static entity = 'media';\n  static fields() {\n    return {\n      id: this.string(''),\n      media_type_id: this.string(''),\n      media_type: this.belongsTo(MediaType,'media_type_id'),\n      description: this.string(''),\n      created: this.string(''),\n      creator: this.string(''),\n      rights: this.number(null),\n      source: this.string(''),\n      data: this.attr(null)\n    };\n  };\n};\n\n","<template>\n  <div>\n    <Media/>\n  </div>\n</template>\n\n<script>\nimport Media from '@/web-components/forms/media.vue';\n\nexport default {\n  name: 'mediaForm',\n  components: {\n    Media\n  },\n};\n</script>\n\n<style>\n</style>\n","<template>\n  <v-card>\n    <v-card-title>Create new 'Media'</v-card-title>\n    <v-card-text>\n        <v-form>\n            <v-card-item><v-text-field label=\"id\" v-model=\"media.id\"  hint=\"\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-select :items=\"mediaTypeOptions\" item-title=\"name\" item-value=\"id\" label=\"media_type\" v-model=\"media.media_type\" :hint=\"mediaTypeOptionsHint\" return-object persistent-hint></v-select></v-card-item>\n            <v-card-item><v-text-field label=\"description\" v-model=\"media.description\"  hint=\"\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><VueDatePicker label=\"created\" v-model=\"media.created\"  hint=\"\" persistent-hint></VueDatePicker></v-card-item>\n            <v-card-item><v-text-field label=\"creator\" v-model=\"media.creator\"  hint=\"\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"rights\" v-model=\"media.rights\" type=\"number\" hint=\"\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"source\" v-model=\"media.source\"  hint=\"\" persistent-hint></v-text-field></v-card-item>\n            <v-card-item><v-text-field label=\"data\" v-model=\"media.data\"  hint=\"\" persistent-hint></v-text-field></v-card-item>\n        </v-form>\n        <v-btn @click=\"createMedia\">Create Media</v-btn>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport { defineComponent, ref, computed } from 'vue';\nimport { VCard, VCardTitle, VCardText, VCardItem, VForm, VTextField, VSelect, VBtn } from 'vuetify/lib/components';\nimport { onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted, onErrorCaptured} from 'vue';\nimport {useStore} from 'pinia';\nimport {useRepo} from 'pinia-orm';\n\nimport LinkForm from '@/web-components/forms/links';\nimport VueDatePicker from '@/web-components/pickers/date-picker.vue';\n\n\nimport MediaType from '@/models/MediaType';\n\n// import model\nimport Media from '@/models/Media';\n\nexport default defineComponent({\n  name: 'MediaForm',\n  props: {\n  },\n  methods:{\n    parseLinks (links) {\n      let res;\n      if( links && links.length > 0 ){\n        res = JSON.stringify(links);\n      }else{\n        res = '';\n      }\n      return res;\n    }\n  },\n  components: {\n    VCard,\n    VCardTitle,\n    VCardText,\n    VCardItem,\n    VTextField,\n    VSelect,\n    VForm,\n    VBtn,\n    VueDatePicker,\n    LinkForm\n  },\n  setup() {\n\n    // set up links object\n    const links = ref([]);\n    const updateLinks = (updatedLinks) => {\n      console.log(\"updating links\");\n      media.value.links = updatedLinks;\n    }\n\n    // set up repos\n    const mediaTypeRepo = useRepo(MediaType);\n    const mediaTypeOptions = computed(() => { return mediaTypeRepo.all() });\n    const mediaTypeOptionsHint = computed(() => {\n      if( media.value.media_type !== null ){\n        if ( 'description' in media.value.media_type ){\n          return media.value.media_type.description;\n        }else{\n          return \"\";\n        }\n      }else{\n        return \"Select media_type\";\n      }\n    } );\n\n    const mediaRepo = useRepo(Media);\n    const media = ref(mediaRepo.make());\n\n    // function to create new object and to add to store\n    const createMedia = async () => {\n        let valueToSave = {};\n        Object.assign(valueToSave,media.value);\n        await mediaRepo.save(valueToSave);\n        resetMedia();\n    };\n\n    const resetMedia = () => {\n        Object.assign(media.value, mediaRepo.make() );\n    };\n\n    return {\n        media,\n        createMedia,\n        resetMedia,\n        links,\n        updateLinks,\n        mediaTypeOptions, mediaTypeOptionsHint\n    }\n  }\n});\n</script>\n","import { render } from \"./media.vue?vue&type=template&id=65f57bf3\"\nimport script from \"./media.vue?vue&type=script&lang=js\"\nexport * from \"./media.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./media.vue?vue&type=template&id=d19e7f02\"\nimport script from \"./media.vue?vue&type=script&lang=js\"\nexport * from \"./media.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Media","Model","static","id","this","string","media_type_id","media_type","belongsTo","MediaType","description","created","creator","rights","number","source","data","attr","_createElementBlock","_createVNode","_component_Media","_createBlock","_component_v_card","_component_v_card_title","_component_v_card_text","_component_v_form","_component_v_card_item","_component_v_text_field","label","_ctx","hint","_component_v_select","items","_component_VueDatePicker","type","_component_v_btn","onClick","defineComponent","name","props","methods","parseLinks","links","res","length","JSON","stringify","components","VCard","VCardTitle","VCardText","VCardItem","VTextField","VSelect","VForm","VBtn","VueDatePicker","LinkForm","setup","ref","updateLinks","updatedLinks","console","log","media","value","mediaTypeRepo","useRepo","mediaTypeOptions","computed","all","mediaTypeOptionsHint","mediaRepo","make","createMedia","async","valueToSave","Object","assign","save","resetMedia","__exports__","render"],"sourceRoot":""}