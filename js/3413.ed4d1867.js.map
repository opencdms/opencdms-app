{"version":3,"file":"js/3413.ed4d1867.js","mappings":"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","sources":["webpack://opencdms-app/./src/views/data-table.vue","webpack://opencdms-app/./src/web-components/data-table.vue","webpack://opencdms-app/./node_modules/vue3-table-lite/src/components/TableLite.vue","webpack://opencdms-app/./node_modules/vue3-table-lite/src/components/TableLite.vue?048d","webpack://opencdms-app/./src/web-components/data-table.vue?9f33","webpack://opencdms-app/./src/views/data-table.vue?1a07","webpack://opencdms-app/./src/web-components/pickers/select-host.vue","webpack://opencdms-app/./src/web-components/pickers/select-host.vue?6cbd","webpack://opencdms-app/./src/web-components/pickers/select-observed-property.vue","webpack://opencdms-app/./src/web-components/pickers/select-observed-property.vue?9c62"],"sourcesContent":["<template>\n  <div>\n    <data-station/>\n  </div>\n</template>\n\n<script>\nimport DataStation from '@/web-components/data-table.vue';\n\n\nexport default {\n  name: 'MyView',\n  components: {\n    DataStation,\n  },\n};\n</script>\n\n<style>\n</style>\n","<template>\n<v-container style=\"width: 100%;\">\n    <v-row>\n      <v-col :cols=\"12\">\n        <v-card>\n          <v-card-title>Select station</v-card-title>\n          <v-card-text><select-host v-model=\"query_param.host\"/></v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-row v-if='query_param.host'>\n      <v-col :cols=\"12\">\n        <v-card>\n          <v-card-title>Select from available data for {{ $route.params.id }}</v-card-title>\n          <v-card-item>\n              <v-container>\n                <v-row>\n                  <v-col :cols=\"4\"><select-observed-property v-model=\"query_param.observed_property\"/></v-col>\n                  <v-col :cols=\"4\"><VueDatePicker text-input format=\"yyyy-MM-dd\" :enable-time-picker=\"false\" label=\"Start\" v-model=\"query_param.start_date\"  hint=\"Start date\" persistent-hint :teleport=\"true\"></VueDatePicker></v-col>\n                  <v-col :cols=\"4\"><VueDatePicker text-input format=\"yyyy-MM-dd\" :enable-time-picker=\"false\" label=\"End\" v-model=\"query_param.end_date\"  hint=\"End date\" persistent-hint :teleport=\"true\"></VueDatePicker></v-col>\n                </v-row>\n              </v-container>\n            </v-card-item>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-row v-if='query_param.host'>\n      <v-col><v-card><v-btn @click=\"fetchData\">Preview</v-btn></v-card></v-col>\n      <v-col><v-card><v-btn @click=\"downloadData\">Download</v-btn></v-card></v-col>\n      <v-col><v-card><v-text-field hint=\"Number of records to download\" persistent-hint label=\"Limit\" v-model=\"maxItems\" type=\"number\" min=\"1\"/></v-card></v-col>\n    </v-row>\n    <v-row>\n      <v-col :cols=\"12\">\n      <v-card>\n        <v-card-title>Results preview</v-card-title>\n        <v-card-subtitle><a href=\"{{baseURL}}{{dataURL}}\"></a>{{baseURL}}{{dataURL}}</v-card-subtitle>\n        <v-card-text>\n          <VDataTable :items=\"items\" :headers=\"headers\" dense small>\n            <template v-slot:item.id=\"{ item }\">\n              <a :href=\"getIDLink(item.raw.id)\">{{item.raw.id}}</a>\n            </template>\n            <template v-slot:item.links=\"{ item }\">\n              {{parseLinks(item.raw.links)}}\n            </template>\n          </VDataTable>\n        </v-card-text>\n      </v-card>\n      </v-col>\n    </v-row>\n</v-container>\n\n</template>\n\n<script>\nimport { defineComponent, ref, watchEffect, computed, watch } from 'vue';\nimport { VCard, VCardTitle, VCardText, VCardItem, VTabs, VTab, VBtn, VAutocomplete, VCardSubtitle, VTextField } from 'vuetify/lib/components';\nimport { VDataTable } from 'vuetify/labs/VDataTable';\nimport { VContainer, VCol, VRow } from 'vuetify/lib/components';\nimport { onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted, onErrorCaptured} from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nimport {useRepo} from 'pinia-orm';\n\nimport SelectHost from '@/web-components/pickers/select-host.vue';\nimport SelectObservedProperty from '@/web-components/pickers/select-observed-property.vue';\n\nimport VueDatePicker from '@vuepic/vue-datepicker';\n//import VueDatePicker from '@/web-components/pickers/date-picker.vue';\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport {formatISO, parseISO} from 'date-fns'\nimport * as d3 from 'd3';\nimport axios from 'axios';\n\nimport {TableLite} from 'vue3-table-lite';\n\n// opencdms imports\nimport Host from '@/models/Host';\nimport {flatten_geojson} from '@/utils/geojson.js';\nimport {loadData} from '@/utils/load-data.js';\n\nexport default defineComponent({\n  name: 'data-table',\n  components: {\n    VCard,\n    VCardTitle, VCardSubtitle,\n    VCardText,\n    VCardItem,\n    VTabs,\n    VTab,\n    VBtn, VTextField,\n    VAutocomplete, VContainer, VCol, VRow,\n    VDataTable,\n    SelectHost,\n    SelectObservedProperty,\n    VueDatePicker,\n    TableLite\n  },\n  methods: {\n    parseLinks (links) {\n      console.log(links)\n      let res;\n      if( links && links.length > 0 ){\n        res = JSON.stringify(links);\n      }else{\n        res = '';\n      }\n      return res;\n    },\n    getIDLink (id) {\n      return process.env.API + \"/collections/observations/items/\"+id;\n    }\n  },\n  setup(props) {\n    // set up varaiables\n    const selectedHost = ref(null)\n    const router = useRouter();\n    const geom = ref(null);\n    const dataURL = ref(\"\");\n    const start_date = ref(null);\n    const end_date = ref(null);\n    const baseURL = ref(process.env.API + \"/collections/observations/items\");\n    const items = ref([]);\n    const headers = ref([]);\n    const maxItems = ref(null);\n    const route = useRoute();\n    const search = ref(\"\");\n    maxItems.value = 1000;\n\n    const query_param = ref(\n      {\n        host:null,\n        start_date: null,\n        end_date: null,\n        observed_property: null\n      }\n    );\n\n\n\n    const fetchData =  async () => {\n      console.log(\"Fetching\" + process.env.API + \"/collections/observations/items\"+dataURL.value)\n      items.value = [];\n      var response = await loadData(process.env.API + \"/collections/observations/items\"+dataURL.value, true)\n                          .then(result => flatten_geojson(result.features));\n      items.value = response;\n      console.log(items.value);\n      headers.value = [\n        {title: \"Record ID\", value: \"id\", key: \"id\", sortable: false},\n        {title: \"Date/time\", value: \"phenomenon_end\", key: \"phenomenon_end\", sortable: false},\n        {title: \"Host\", value: \"host_id\", key: \"host_id\", sortable: false},\n        {title: \"Observed property\", value: \"observed_property_id\", key: \"observed_property_id\", sortable: false},\n        {title: \"Result value\", value: \"result_value\", key: \"result_value\", sortable: false},\n        {title: \"Result units\", value: \"result_uom\", key: \"result_uom\", sortable: false},\n        {title: \"Result quality\", value: \"result_quality\", key: \"result_quality\", sortable: false}\n      ];\n      console.log(items.value)\n      console.log(\"Fetch complete\")\n    };\n\n\n    onBeforeUnmount( () => {\n        query_watch();\n        items.value = null;\n        selectedHost.value = null;\n        geom.value = null;\n        dataURL.value = null;\n        start_date.value = null;\n        end_date.value = null;\n        baseURL.value = null;\n        headers.value = null;\n        maxItems.value = null;\n    });\n    onUnmounted( () => {\n      console.log(\"Unmounted\");\n    });\n\n    const downloadData = () => {\n      var downloadURL = process.env.API + \"/collections/observations/items\"+dataURL.value.replace(\"f=json\",\"f=csv\").replace(\"limit=25\", \"limit=\"+maxItems.value);\n      window.location.href = downloadURL;\n    }\n\n    // set up repos\n    const hostRepo = useRepo(Host);\n    const hostOptions = computed(() => { return hostRepo.all() });\n    const host = ref(null)\n\n    const query_watch = watch(query_param.value, () => {\n      dataURL.value=\"?limit=25\"\n      if( query_param.value.host ){\n        dataURL.value = dataURL.value + \"&host_id=\" + query_param.value.host.id\n      }\n      if( query_param.value.observed_property ){\n        dataURL.value = dataURL.value + \"&observed_property_id=\" + query_param.value.observed_property.id\n      }\n      if( query_param.value.start_date && query_param.value.end_date){\n        console.log(query_param.value.start_date.getDay());\n        dataURL.value = dataURL.value + \"&datetime=\"+formatISO(query_param.value.start_date).replace(\"+\",\"%2B\")+\"/\"+formatISO(query_param.value.end_date).replace(\"+\",\"%2B\")\n      }\n      dataURL.value = dataURL.value + \"&f=json\"\n      console.log(query_param.value)\n    }, {deep: true});\n\n\n\n    onErrorCaptured( () => {});\n    return {host, hostOptions, selectedHost, geom, start_date, end_date, downloadData, search,\n            query_param, dataURL, formatISO, items, headers, baseURL, maxItems, fetchData};\n  }\n\n});\n\n</script>\n","<template>\n  <div class=\"vtl vtl-card\">\n    <div class=\"vtl-card-title\" v-if=\"title\">{{ title }}</div>\n    <div class=\"vtl-card-body\">\n      <div class=\"vtl-row\">\n        <div\n          class=\"col-sm-12\"\n          :class=\"{\n            'fixed-first-column': isFixedFirstColumn,\n            'fixed-first-second-column': isFixedFirstColumn && hasCheckbox,\n          }\"\n        >\n          <div v-if=\"isLoading\" class=\"vtl-loading-mask\">\n            <div class=\"vtl-loading-content\">\n              <span style=\"color: white\">Loading...</span>\n            </div>\n          </div>\n          <table\n            class=\"vtl-table vtl-table-hover vtl-table-bordered vtl-table-responsive vtl-table-responsive-sm\"\n            ref=\"localTable\"\n            :style=\"'max-height: ' + maxHeight + 'px;'\"\n          >\n            <thead class=\"vtl-thead\">\n              <tr class=\"vtl-thead-tr\">\n                <th v-if=\"hasCheckbox\" class=\"vtl-thead-th vtl-checkbox-th\">\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      class=\"vtl-thead-checkbox\"\n                      v-model=\"setting.isCheckAll\"\n                    />\n                  </div>\n                </th>\n                <th\n                  v-for=\"(col, index) in columns\"\n                  class=\"vtl-thead-th\"\n                  :class=\"col.headerClasses\"\n                  :key=\"index\"\n                  :style=\"\n                    Object.assign(\n                      {\n                        width: col.width ? col.width : 'auto',\n                      },\n                      col.headerStyles\n                    )\n                  \"\n                >\n                  <div\n                    class=\"vtl-thead-column\"\n                    :class=\"{\n                      'vtl-sortable': col.sortable,\n                      'vtl-both': col.sortable,\n                      'vtl-asc': setting.order === col.field && setting.sort === 'asc',\n                      'vtl-desc': setting.order === col.field && setting.sort === 'desc',\n                    }\"\n                    @click.prevent=\"col.sortable ? doSort(col.field) : false\"\n                  >\n                    {{ col.label }}\n                  </div>\n                </th>\n              </tr>\n            </thead>\n            <template v-if=\"rows.length > 0\">\n              <tbody\n                v-if=\"isStaticMode\"\n                class=\"vtl-tbody\"\n                :set=\"(templateRows = groupingKey == '' ? [localRows] : localRows)\"\n              >\n                <template\n                  v-for=\"(rows, groupingIndex) in templateRows\"\n                  :key=\"groupingIndex\"\n                >\n                  <tr v-if=\"groupingKey != ''\" class=\"vtl-tbody-tr vtl-group-tr\">\n                    <td\n                      :colspan=\"hasCheckbox ? columns.length + 1 : columns.length\"\n                      class=\"vtl-tbody-td vtl-group-td\"\n                    >\n                      <div class=\"flex\">\n                        <div v-if=\"hasGroupToggle\" class=\"animation\">\n                          <a\n                            :ref=\"(el) => (toggleButtonRefs[groupingIndex] = el)\"\n                            class=\"cursor-pointer\"\n                            @click.prevent=\"toggleGroup(groupingIndex)\"\n                            >▼</a\n                          >\n                        </div>\n                        <div\n                          class=\"ml-2\"\n                          v-html=\"\n                            groupingDisplay\n                              ? groupingDisplay(groupingIndex)\n                              : groupingIndex\n                          \"\n                        ></div>\n                      </div>\n                    </td>\n                  </tr>\n                  <tr\n                    v-for=\"(row, i) in rows\"\n                    :key=\"row[setting.keyColumn] ? row[setting.keyColumn] : i\"\n                    :ref=\"\n                      (el) => {\n                        if (!groupingRowsRefs[groupingIndex]) {\n                          groupingRowsRefs[groupingIndex] = [];\n                        }\n                        groupingRowsRefs[groupingIndex][i] = el;\n                      }\n                    \"\n                    :name=\"'vtl-group-' + groupingIndex\"\n                    class=\"vtl-tbody-tr\"\n                    :class=\"\n                      typeof rowClasses === 'function' ? rowClasses(row) : rowClasses\n                    \"\n                    @mouseenter=\"addHoverClassToTr\"\n                    @mouseleave=\"removeHoverClassFromTr\"\n                    @click=\"$emit('row-clicked', row)\"\n                  >\n                    <td v-if=\"hasCheckbox\" class=\"vtl-tbody-td vtl-checkbox-td\">\n                      <div>\n                        <input\n                          type=\"checkbox\"\n                          class=\"vtl-tbody-checkbox\"\n                          :ref=\"\n                            (el) => {\n                              rowCheckbox.push(el);\n                            }\n                          \"\n                          :value=\"row[setting.keyColumn]\"\n                          @click=\"checked(row, $event)\"\n                        />\n                      </div>\n                    </td>\n                    <td\n                      v-for=\"(col, j) in columns\"\n                      :key=\"j\"\n                      class=\"vtl-tbody-td\"\n                      :class=\"col.columnClasses\"\n                      :style=\"col.columnStyles\"\n                    >\n                      <div v-if=\"col.display\" v-html=\"col.display(row)\"></div>\n                      <div v-else>\n                        <div v-if=\"setting.isSlotMode && slots[col.field]\">\n                          <slot :name=\"col.field\" :value=\"row\"></slot>\n                        </div>\n                        <span v-else>{{ row[col.field] }}</span>\n                      </div>\n                    </td>\n                  </tr>\n                </template>\n              </tbody>\n              <tbody\n                v-else\n                :set=\"(templateRows = groupingKey == '' ? [rows] : groupingRows)\"\n              >\n                <template\n                  v-for=\"(rows, groupingIndex) in templateRows\"\n                  :key=\"groupingIndex\"\n                >\n                  <tr v-if=\"groupingKey != ''\" class=\"vtl-tbody-tr vtl-group-tr\">\n                    <td\n                      :colspan=\"hasCheckbox ? columns.length + 1 : columns.length\"\n                      class=\"vtl-tbody-td vtl-group-td\"\n                    >\n                      <div class=\"flex\">\n                        <div v-if=\"hasGroupToggle\" class=\"animation\">\n                          <a\n                            :ref=\"(el) => (toggleButtonRefs[groupingIndex] = el)\"\n                            class=\"cursor-pointer\"\n                            @click.prevent=\"toggleGroup(groupingIndex)\"\n                            >▼</a\n                          >\n                        </div>\n                        <div\n                          class=\"ml-2\"\n                          v-html=\"\n                            groupingDisplay\n                              ? groupingDisplay(groupingIndex)\n                              : groupingIndex\n                          \"\n                        ></div>\n                      </div>\n                    </td>\n                  </tr>\n                  <tr\n                    v-for=\"(row, i) in rows\"\n                    :ref=\"\n                      (el) => {\n                        if (!groupingRowsRefs[groupingIndex]) {\n                          groupingRowsRefs[groupingIndex] = [];\n                        }\n                        groupingRowsRefs[groupingIndex][i] = el;\n                      }\n                    \"\n                    :name=\"'vtl-group-' + groupingIndex\"\n                    :key=\"row[setting.keyColumn] ? row[setting.keyColumn] : i\"\n                    class=\"vtl-tbody-tr\"\n                    :class=\"\n                      typeof rowClasses === 'function' ? rowClasses(row) : rowClasses\n                    \"\n                    @mouseenter=\"addHoverClassToTr\"\n                    @mouseleave=\"removeHoverClassFromTr\"\n                    @click=\"$emit('row-clicked', row)\"\n                  >\n                    <td v-if=\"hasCheckbox\" class=\"vtl-tbody-td vtl-checkbox-td\">\n                      <div>\n                        <input\n                          type=\"checkbox\"\n                          class=\"vtl-tbody-checkbox\"\n                          :ref=\"\n                            (el) => {\n                              rowCheckbox.push(el);\n                            }\n                          \"\n                          :value=\"row[setting.keyColumn]\"\n                          @click=\"checked(row, $event)\"\n                        />\n                      </div>\n                    </td>\n                    <td\n                      v-for=\"(col, j) in columns\"\n                      :key=\"j\"\n                      class=\"vtl-tbody-td\"\n                      :class=\"col.columnClasses\"\n                      :style=\"col.columnStyles\"\n                    >\n                      <div v-if=\"col.display\" v-html=\"col.display(row)\"></div>\n                      <div v-else>\n                        <div v-if=\"setting.isSlotMode && slots[col.field]\">\n                          <slot :name=\"col.field\" :value=\"row\"></slot>\n                        </div>\n                        <span v-else>{{ row[col.field] }}</span>\n                      </div>\n                    </td>\n                  </tr>\n                </template>\n              </tbody>\n            </template>\n          </table>\n        </div>\n      </div>\n      <div class=\"vtl-paging vtl-row\" v-if=\"rows.length > 0\">\n        <template v-if=\"!setting.isHidePaging\">\n          <div class=\"vtl-paging-info col-sm-12 col-md-4\">\n            <div role=\"status\" aria-live=\"polite\">\n              {{\n                stringFormat(messages.pagingInfo, setting.offset, setting.limit, total)\n              }}\n            </div>\n          </div>\n          <div class=\"vtl-paging-change-div col-sm-12 col-md-4\">\n            <span class=\"vtl-paging-count-label\">{{ messages.pageSizeChangeLabel }}</span>\n            <select class=\"vtl-paging-count-dropdown\" v-model=\"setting.pageSize\">\n              <option\n                v-for=\"pageOption in pageOptions\"\n                :value=\"pageOption.value\"\n                :key=\"pageOption.value\"\n              >\n                {{ pageOption.text }}\n              </option>\n            </select>\n            <span class=\"vtl-paging-page-label\">{{ messages.gotoPageLabel }}</span>\n            <select class=\"vtl-paging-page-dropdown\" v-model=\"setting.page\">\n              <option v-for=\"n in setting.maxPage\" :key=\"n\" :value=\"parseInt(n)\">\n                {{ n }}\n              </option>\n            </select>\n          </div>\n          <div class=\"vtl-paging-pagination-div col-sm-12 col-md-4\">\n            <div class=\"dataTables_paginate\">\n              <ul class=\"vtl-paging-pagination-ul vtl-pagination\">\n                <li\n                  class=\"vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item\"\n                  :class=\"{ disabled: setting.page <= 1 }\"\n                >\n                  <a\n                    class=\"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link cursor-pointer\"\n                    aria-label=\"Previous\"\n                    @click.prevent=\"setting.page = 1\"\n                  >\n                    <span aria-hidden=\"true\">&laquo;</span>\n                    <span class=\"sr-only\">First</span>\n                  </a>\n                </li>\n                <li\n                  class=\"vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item\"\n                  :class=\"{ disabled: setting.page <= 1 }\"\n                >\n                  <a\n                    class=\"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link cursor-pointer\"\n                    aria-label=\"Previous\"\n                    @click.prevent=\"prevPage\"\n                  >\n                    <span aria-hidden=\"true\">&lt;</span>\n                    <span class=\"sr-only\">Prev</span>\n                  </a>\n                </li>\n                <li\n                  class=\"vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item\"\n                  v-for=\"n in setting.paging\"\n                  :key=\"n\"\n                  :class=\"{ disabled: setting.page === n }\"\n                >\n                  <a\n                    class=\"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link cursor-pointer\"\n                    @click.prevent=\"movePage(n)\"\n                    >{{ n }}</a\n                  >\n                </li>\n                <li\n                  class=\"vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item\"\n                  :class=\"{ disabled: setting.page >= setting.maxPage }\"\n                >\n                  <a\n                    class=\"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link cursor-pointer\"\n                    aria-label=\"Next\"\n                    @click.prevent=\"nextPage\"\n                  >\n                    <span aria-hidden=\"true\">&gt;</span>\n                    <span class=\"sr-only\">Next</span>\n                  </a>\n                </li>\n                <li\n                  class=\"vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item\"\n                  :class=\"{ disabled: setting.page >= setting.maxPage }\"\n                >\n                  <a\n                    class=\"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link cursor-pointer\"\n                    aria-label=\"Next\"\n                    @click.prevent=\"setting.page = setting.maxPage\"\n                  >\n                    <span aria-hidden=\"true\">&raquo;</span>\n                    <span class=\"sr-only\">Last</span>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </template>\n      </div>\n      <div class=\"vtl-row\" v-else>\n        <div class=\"vtl-empty-msg col-sm-12 text-center\">\n          {{ messages.noDataAvailable }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  ref,\n  reactive,\n  computed,\n  watch,\n  onBeforeUpdate,\n  nextTick,\n  onMounted,\n} from \"vue\";\n\nexport default defineComponent({\n  name: \"my-table\",\n  emits: [\n    \"return-checked-rows\",\n    \"do-search\",\n    \"is-finished\",\n    \"get-now-page\",\n    \"row-clicked\",\n    \"row-toggled\",\n  ],\n  props: {\n    // 是否讀取中 (is data loading)\n    isLoading: {\n      type: Boolean,\n      require: true,\n    },\n    // 是否執行了重新查詢 (Whether to perform a re-query)\n    isReSearch: {\n      type: Boolean,\n      require: true,\n    },\n    // 有無Checkbox (Presence of Checkbox)\n    hasCheckbox: {\n      type: Boolean,\n      default: false,\n    },\n    // Checkbox勾選後返回資料的型態 (Returns data type for checked of Checkbox)\n    checkedReturnType: {\n      type: String,\n      default: \"key\",\n    },\n    // 標題 (title)\n    title: {\n      type: String,\n      default: \"\",\n    },\n    // 是否鎖定第一欄位位置 (Fixed first column's position)\n    isFixedFirstColumn: {\n      type: Boolean,\n      default: false,\n    },\n    // 欄位 (Field)\n    columns: {\n      type: Array,\n      default: () => {\n        return [];\n      },\n    },\n    // 資料 (data)\n    rows: {\n      type: Array,\n      default: () => {\n        return [];\n      },\n    },\n    // 資料列類別 (data row classes)\n    rowClasses: {\n      type: [Array, Function],\n      default: () => {\n        return [];\n      },\n    },\n    // 一頁顯示筆數 (Display the number of items on one page)\n    pageSize: {\n      type: Number,\n      default: 10,\n    },\n    // 總筆數 (Total number of transactions)\n    total: {\n      type: Number,\n      default: 100,\n    },\n    // 現在頁數 (Current page number)\n    page: {\n      type: Number,\n      default: 1,\n    },\n    // 排序條件 (Sort condition)\n    sortable: {\n      type: Object,\n      default: () => {\n        return {\n          order: \"id\",\n          sort: \"asc\",\n        };\n      },\n    },\n    // 顯示文字 (Display text)\n    messages: {\n      type: Object,\n      default: () => {\n        return {\n          pagingInfo: \"Showing {0}-{1} of {2}\",\n          pageSizeChangeLabel: \"Row count:\",\n          gotoPageLabel: \"Go to page:\",\n          noDataAvailable: \"No data\",\n        };\n      },\n    },\n    // 靜態模式 (Static mode(no refresh server data))\n    isStaticMode: {\n      type: Boolean,\n      default: false,\n    },\n    // 插槽模式 (V-slot mode)\n    isSlotMode: {\n      type: Boolean,\n      default: false,\n    },\n    // 是否隱藏換頁資訊 (Hide paging)\n    isHidePaging: {\n      type: Boolean,\n      default: false,\n    },\n    // 一頁顯示筆數下拉選單 (Dropdown of Display the number of items on one page)\n    pageOptions: {\n      type: Array,\n      default: () => [\n        {\n          value: 10,\n          text: 10,\n        },\n        {\n          value: 25,\n          text: 25,\n        },\n        {\n          value: 50,\n          text: 50,\n        },\n      ],\n    },\n    // 分類條件 (Key of grouping)\n    groupingKey: {\n      type: String,\n      default: \"\",\n    },\n    // 是否顯示隱藏分類開關 (Has hide group rows toggle)\n    hasGroupToggle: {\n      type: Boolean,\n      default: false,\n    },\n    // 客製化分類顯示 (Customize grouping title)\n    groupingDisplay: {\n      type: Function,\n      default: null,\n    },\n    // 設定表格高度 (Table's max height)\n    maxHeight: {\n      default: \"auto\",\n    },\n    // 預設群組顯示時為折疊 (Grouping collapsed on start)\n    startCollapsed: {\n      type: Boolean,\n      default: false,\n    },\n    // 保持刷新後折疊狀態 (Keep collapsed status after refresh)\n    isKeepCollapsed: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props, { emit, slots }) {\n    let localTable = ref(null);\n\n    // 檢查下拉選單中是否包含預設一頁顯示筆數 (Validate dropdown's values have page-size value or not)\n    let defaultPageSize =\n      props.pageOptions.length > 0\n        ? ref(props.pageOptions[0].value)\n        : ref(props.pageSize);\n    if (props.pageOptions.length > 0) {\n      props.pageOptions.forEach((v) => {\n        if (\n          Object.prototype.hasOwnProperty.call(v, \"value\") &&\n          Object.prototype.hasOwnProperty.call(v, \"text\") &&\n          props.pageSize == v.value\n        ) {\n          defaultPageSize.value = v.value;\n        }\n      });\n    }\n\n    // 組件用內部設定值 (Internal set value for components)\n    const setting = reactive({\n      // 是否啟用Slot模式 (Enable slot mode)\n      isSlotMode: props.isSlotMode,\n      // 是否全選 (Whether to select all)\n      isCheckAll: false,\n      // 是否隱藏換頁資訊 (Hide paging)\n      isHidePaging: props.isHidePaging,\n      // KEY欄位名稱 (KEY field name)\n      keyColumn: computed(() => {\n        let key = \"\";\n        Object.assign(props.columns).forEach((col) => {\n          if (col.isKey) {\n            key = col.field;\n          }\n        });\n        return key;\n      }),\n      // 當前頁數 (current page number)\n      page: props.page,\n      // 每頁顯示筆數 (Display count per page)\n      pageSize: defaultPageSize.value,\n      // 最大頁數 (Maximum number of pages)\n      maxPage: computed(() => {\n        if (props.total <= 0) {\n          return 0;\n        }\n        let maxPage = Math.floor(props.total / setting.pageSize);\n        let mod = props.total % setting.pageSize;\n        if (mod > 0) {\n          maxPage++;\n        }\n        return maxPage;\n      }),\n      // 該頁數起始值 (The starting value of the page number)\n      offset: computed(() => {\n        return (setting.page - 1) * setting.pageSize + 1;\n      }),\n      // 該頁數最大值 (Maximum number of pages0\n      limit: computed(() => {\n        let limit = setting.page * setting.pageSize;\n        return props.total >= limit ? limit : props.total;\n      }),\n      // 換頁陣列 (Paging array)\n      paging: computed(() => {\n        let startPage = setting.page - 2 <= 0 ? 1 : setting.page - 2;\n        if (setting.maxPage - setting.page <= 2) {\n          startPage = setting.maxPage - 4;\n        }\n        startPage = startPage <= 0 ? 1 : startPage;\n        let pages = [];\n        for (let i = startPage; i <= setting.maxPage; i++) {\n          if (pages.length < 5) {\n            pages.push(i);\n          }\n        }\n        return pages;\n      }),\n      // 組件內用排序 (Sortable for local)\n      order: props.sortable.order,\n      sort: props.sortable.sort,\n      pageOptions: props.pageOptions,\n    });\n\n    // 已選擇中的資料 (Checked rows)\n    const isChecked = ref([]);\n\n    // 組件內用資料 (Data rows for local)\n    const localRows = computed(() => {\n      let rows = props.rows;\n      // refs https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Collator/compare\n      var collator = new Intl.Collator(undefined, {\n        numeric: true,\n        sensitivity: \"base\",\n      });\n      let sortOrder = setting.sort === \"desc\" ? -1 : 1;\n      rows.sort(function (a, b) {\n        return collator.compare(a[setting.order], b[setting.order]) * sortOrder;\n      });\n\n      let result = null;\n      if (props.groupingKey) {\n        // If have set grouping-key create group temp data\n        let tmp = {};\n        rows.forEach((v) => {\n          if (!tmp[v[props.groupingKey]]) {\n            tmp[v[props.groupingKey]] = [];\n          }\n          tmp[v[props.groupingKey]].push(v);\n        });\n\n        result = {};\n        for (let index = setting.offset - 1; index < setting.limit; index++) {\n          result[rows[index][props.groupingKey]] = tmp[rows[index][props.groupingKey]];\n        }\n      } else {\n        result = [];\n        for (let index = setting.offset - 1; index < setting.limit; index++) {\n          result.push(rows[index]);\n        }\n      }\n\n      nextTick(function () {\n        // 資料完成渲染後回傳私有元件\n        callIsFinished();\n      });\n\n      return result;\n    });\n\n    ////////////////////////////\n    //\n    //  Checkbox 相關操作\n    //  (Checkbox related operations)\n    //\n\n    // 定義Checkbox參照 (Define Checkbox reference)\n    const rowCheckbox = ref([]);\n\n    /**\n     * 重新渲染前執行 (Execute before re-rendering)\n     */\n    onBeforeUpdate(() => {\n      // 每次更新前都把值全部清空 (Clear all values before each update)\n      rowCheckbox.value = [];\n    });\n\n    /**\n     * 監聽全勾選Checkbox (Check all checkboxes for monitoring)\n     */\n    watch(\n      () => setting.isCheckAll,\n      (state) => {\n        if (props.hasCheckbox) {\n          isChecked.value = [];\n          if (state) {\n            let tmpRows = (props.isStaticMode) ? props.rows.slice((setting.offset - 1), setting.limit) : props.rows;\n            if (props.checkedReturnType == \"row\") {\n              isChecked.value = tmpRows;\n            } else {\n              tmpRows.forEach((val) => {\n                isChecked.value.push(val[setting.keyColumn]);\n              });\n            }\n          }\n          rowCheckbox.value.forEach((val) => {\n            if (val) {\n              val.checked = state;\n            }\n          });\n          // 回傳畫面上選上的資料 (Return the selected data on the screen)\n          emit(\"return-checked-rows\", isChecked.value);\n        }\n      }\n    );\n\n    /**\n     * 監控有無顯示Checkbox變化 (hasCeckbox props for monitoring)\n     */\n    watch(\n      () => props.hasCheckbox,\n      (v) => {\n        if (!v) {\n          setting.isCheckAll = false;\n        }\n      }\n    );\n\n    /**\n     * Checkbox點擊事件 (Checkbox click event)\n     */\n    const checked = (row, event) => {\n      event.stopPropagation();\n      let checkboxValue = row[setting.keyColumn];\n      if (props.checkedReturnType == \"row\") {\n        checkboxValue = row;\n      }\n      if (event.target.checked) {\n        isChecked.value.push(checkboxValue);\n      } else {\n        const index = isChecked.value.indexOf(checkboxValue);\n        if (index >= 0) {\n          isChecked.value.splice(index, 1);\n        }\n      }\n      if (isChecked.value.length == props.rows.length) {\n        setting.isCheckAll = true;\n      } else {\n        // 回傳畫面上選上的資料 (Return the selected data on the screen)\n        emit(\"return-checked-rows\", isChecked.value);\n      }\n    };\n\n    /**\n     * 清空畫面上所有選擇資料 (Clear all selected data on the screen)\n     */\n    const clearChecked = () => {\n      isChecked.value = [];\n      rowCheckbox.value.forEach((val) => {\n        if (val && val.checked) {\n          val.checked = false;\n        }\n      });\n      // 回傳畫面上選上的資料 (Return the selected data on the screen)\n      emit(\"return-checked-rows\", isChecked.value);\n    };\n\n    ////////////////////////////\n    //\n    //  排序·換頁等 相關操作\n    //  (Sorting, page change, etc. related operations)\n    //\n\n    /**\n     * 呼叫執行排序 (Call execution sequencing)\n     */\n    const doSort = (order) => {\n      let sort = \"asc\";\n      if (order == setting.order) {\n        // 排序中的項目時 (When sorting items)\n        if (setting.sort == \"asc\") {\n          sort = \"desc\";\n        }\n      }\n      let offset = (setting.page - 1) * setting.pageSize;\n      let limit = setting.pageSize;\n      setting.order = order;\n      setting.sort = sort;\n      emit(\"do-search\", offset, limit, order, sort);\n\n      // 清空畫面上選擇的資料 (Clear the selected data on the screen)\n      if (setting.isCheckAll) {\n        // 取消全選時自然會清空 (It will be cleared when you cancel all selections)\n        setting.isCheckAll = false;\n      } else {\n        if (props.hasCheckbox) {\n          clearChecked();\n        }\n      }\n    };\n\n    /**\n     * 切換頁碼 (Switch page number)\n     *\n     * @param page      number  新頁碼    (New page number)\n     * @param prevPage  number  現在頁碼  (Current page number)\n     */\n    const changePage = (page, prevPage) => {\n      setting.isCheckAll = false;\n      if (props.hasCheckbox) {\n        isChecked.value = [];\n      }\n      let order = setting.order;\n      let sort = setting.sort;\n      let offset = (page - 1) * setting.pageSize;\n      let limit = setting.pageSize;\n      if (!props.isReSearch || page > 1 || page == prevPage) {\n        // 非重新查詢發生的頁碼變動才執行呼叫查詢 (Call query will only be executed if the page number is changed without re-query)\n        emit(\"do-search\", offset, limit, order, sort);\n      }\n    };\n    // 監聽頁碼切換 (Monitor page switching)\n    watch(() => setting.page, changePage);\n    // 監聽手動頁碼切換 (Monitor manual page switching)\n    watch(\n      () => props.page,\n      (val) => {\n        if (val <= 1) {\n          setting.page = 1;\n          emit(\"get-now-page\", setting.page);\n        } else if (val >= setting.maxPage) {\n          setting.page = setting.maxPage;\n          emit(\"get-now-page\", setting.page);\n        } else {\n          setting.page = val;\n        }\n      }\n    );\n\n    /**\n     * 切換顯示筆數 (Switch display number)\n     */\n    const changePageSize = () => {\n      if (setting.page === 1) {\n        // 沒自動觸發 changePage()，所以手動觸發\n        changePage(setting.page, setting.page);\n      } else {\n        // 強制返回第一頁,並自動觸發 changePage()\n        setting.page = 1;\n        setting.isCheckAll = false;\n      }\n    };\n    // 監聽組件內顯示筆數切換 (Monitor display number switch from component)\n    watch(() => setting.pageSize, changePageSize);\n    // 監聽來自Prop的顯示筆數切換 (Monitor display number switch from prop)\n    watch(\n      () => props.pageSize,\n      (newPageSize) => {\n        setting.pageSize = newPageSize;\n      }\n    );\n\n    /**\n     * 上一頁 (Previous page)\n     */\n    const prevPage = () => {\n      if (setting.page == 1) {\n        // 如果是第一頁，不予執行 (If it is the first page, it will not be executed)\n        return false;\n      }\n      setting.page--;\n    };\n\n    /**\n     * 移動至指定頁數 (Move to the specified number of pages)\n     */\n    const movePage = (page) => {\n      setting.page = page;\n    };\n\n    /**\n     * 下一頁 (Next page)\n     */\n    const nextPage = () => {\n      if (setting.page >= setting.maxPage) {\n        // 如果等於大於最大頁數，不與執行 (If it is equal to or greater than the maximum number of pages, no execution)\n        return false;\n      }\n      setting.page++;\n    };\n\n    // 監聽資料變更 (Monitoring data changes)\n    watch(\n      () => props.rows,\n      () => {\n        if (props.isReSearch || props.isStaticMode) {\n          setting.page = 1;\n        }\n        nextTick(function () {\n          // 資料完成渲染後回傳私有元件 (Return the private components after the data is rendered)\n          if (!props.isStaticMode) {\n            callIsFinished();\n          }\n        });\n      }\n    );\n\n    const stringFormat = (template, ...args) => {\n      return template.replace(/{(\\d+)}/g, function (match, number) {\n        return typeof args[number] != \"undefined\" ? args[number] : match;\n      });\n    };\n\n    // Call 「is-finished」 Method\n    const callIsFinished = () => {\n      if (localTable.value) {\n        let localElement = localTable.value.getElementsByClassName(\"is-rows-el\");\n        emit(\"is-finished\", localElement);\n      }\n      emit(\"get-now-page\", setting.page);\n    };\n\n    // Toggle button elements\n    const toggleButtonRefs = ref({});\n    // Grouping rows\n    const groupingRowsRefs = ref({});\n    // Saved toggle status\n    const groupingToggleStatus = ref({});\n\n    // Data rows for grouping (Default-mode only)\n    const groupingRows = computed(() => {\n      let result = {};\n      props.rows.forEach((v) => {\n        if (!result[v[props.groupingKey]]) {\n          result[v[props.groupingKey]] = [];\n        }\n        result[v[props.groupingKey]].push(v);\n      });\n\n      nextTick(function () {\n        if (props.startCollapsed || props.isKeepCollapsed) {\n          for (const [groupIndex, el] of Object.entries(toggleButtonRefs.value)) {\n            if (el) {\n              let isOpen = !props.startCollapsed;\n              if (\n                props.isKeepCollapsed &&\n                groupingToggleStatus.value[groupIndex] !== undefined\n              ) {\n                isOpen = !groupingToggleStatus.value[groupIndex];\n              }\n              if (\n                (isOpen && el.parentElement.classList.contains(\"rotated-90\")) ||\n                (!isOpen && !el.parentElement.classList.contains(\"rotated-90\"))\n              ) {\n                el.parentElement.classList.toggle(\"rotated-90\");\n              }\n              if (!isOpen) {\n                groupingRowsRefs.value[groupIndex].forEach((element) => {\n                  if (element) {\n                    element.classList.add(\"hidden\");\n                  }\n                });\n              }\n            }\n          }\n        }\n        callIsFinished();\n      });\n\n      return result;\n    });\n\n    /**\n     * Toggle Group rows\n     *\n     * @param {String} groupIndex\n     */\n    const toggleGroup = (groupIndex) => {\n      let targetEl = toggleButtonRefs.value[groupIndex];\n      if (targetEl) {\n        targetEl.parentElement.classList.toggle(\"rotated-90\");\n        const isClose = targetEl.parentElement.classList.contains(\"rotated-90\");\n        groupingRowsRefs.value[groupIndex].forEach((element) => {\n          if (element) {\n            if (isClose) {\n              element.classList.add(\"hidden\");\n            } else {\n              element.classList.remove(\"hidden\");\n            }\n          }\n        });\n        groupingToggleStatus.value[groupIndex] = isClose;\n        emit(\"row-toggled\", groupingRows.value[groupIndex], isClose);\n      }\n    };\n\n    /**\n     * Add hover class to tr\n     * \n     * @param {MouseEvent} mouseEvent \n     */\n     const addHoverClassToTr = (mouseEvent) => {\n      mouseEvent.target.classList.add(\"hover\");\n    };\n\n    /**\n     * Remove hover class from tr\n     * \n     * @param {MouseEvent} mouseEvent \n     */\n    const removeHoverClassFromTr = (mouseEvent) => {\n      mouseEvent.target.classList.remove(\"hover\");\n    };\n\n    /**\n     * 組件掛載後事件 (Mounted Event)\n     */\n    onMounted(() => {\n      nextTick(() => {\n        if (props.rows.length > 0) {\n          callIsFinished();\n        }\n      });\n    });\n\n    return {\n      slots,\n      localTable,\n      localRows,\n      setting,\n      rowCheckbox,\n      checked,\n      clearChecked,\n      doSort,\n      prevPage,\n      movePage,\n      nextPage,\n      stringFormat,\n      toggleButtonRefs,\n      groupingRowsRefs,\n      groupingRows,\n      toggleGroup,\n      addHoverClassToTr,\n      removeHoverClassFromTr,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.vtl-checkbox-th {\n  width: 1%;\n  min-width: 38px;\n}\n.vtl-checkbox-td {\n  width: 1%;\n  min-width: 38px;\n}\n\n.vtl-both {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAAkElEQVQoz7X QMQ5AQBCF4dWQSJxC5wwax1Cq1e7BAdxD5SL+Tq/QCM1oNiJidwox0355mXnG/DrEtIQ6azioNZQxI0ykPhTQIwhCR+BmBYtlK7kLJYwWCcJA9M4qdrZrd8pPjZWPtOqdRQy320YSV17OatFC4euts6z39GYMKRPCTKY9UnPQ6P+GtMRfGtPnBCiqhAeJPmkqAAAAAElFTkSuQmCC\");\n}\n\n.vtl-sortable {\n  cursor: pointer;\n  background-position: right;\n  background-repeat: no-repeat;\n  padding-right: 30px !important;\n}\n\n.vtl-asc {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZ0lEQVQ4y2NgGLKgquEuFxBPAGI2ahhWCsS/gDibUoO0gPgxEP8H4ttArEyuQYxAPBdqEAxPBImTY5gjEL9DM+wTENuQahAvEO9DMwiGdwAxOymGJQLxTyD+jgWDxCMZRsEoGAVoAADeemwtPcZI2wAAAABJRU5ErkJggg==);\n}\n\n.vtl-desc {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZUlEQVQ4y2NgGAWjYBSggaqGu5FA/BOIv2PBIPFEUgxjB+IdQPwfC94HxLykus4GiD+hGfQOiB3J8SojEE9EM2wuSJzcsFMG4ttQgx4DsRalkZENxL+AuJQaMcsGxBOAmGvopk8AVz1sLZgg0bsAAAAASUVORK5CYII=);\n}\n\n.vtl-loading-mask {\n  position: absolute;\n  z-index: 3;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  flex-flow: column;\n  transition: opacity 0.3s ease;\n}\n\n.vtl-loading-content {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.vtl-card {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  min-width: 0;\n  word-wrap: break-word;\n  background-color: #fff;\n  background-clip: border-box;\n}\n\nselect {\n  width: auto;\n  border: 1px solid #cccccc;\n  background-color: #ffffff;\n  height: auto;\n  padding: 0;\n  margin-bottom: 0;\n}\n\n.vtl-table {\n  width: 100%;\n  margin-bottom: 1rem;\n  color: #212529;\n  border-collapse: collapse;\n}\n\nth {\n  text-align: inherit;\n}\n\ntr {\n  display: table-row;\n  vertical-align: inherit;\n  border-color: inherit;\n}\n\n.vtl-table-bordered thead td,\n.vtl-table-bordered thead th {\n  border-bottom-width: 2px;\n}\n\n.vtl-table thead th {\n  vertical-align: bottom;\n  color: #fff;\n  background-color: #343a40;\n  border-color: #454d55;\n  border-bottom: 2px solid #dee2e6;\n}\n\n.vtl-table-bordered td,\n.vtl-table-bordered th {\n  border: 1px solid #dee2e6;\n}\n\n.vtl-table td,\n.vtl-table th {\n  padding: 0.75rem;\n  vertical-align: top;\n  border-top: 1px solid #dee2e6;\n  vertical-align: middle;\n}\n\n.vtl-table-hover tbody tr:hover {\n  color: #212529;\n  background-color: #ececec;\n}\n\n.vtl-table-responsive {\n  display: block;\n  width: 100%;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.vtl-table-responsive > .vtl-table-bordered {\n  border: 0;\n}\n\n.vtl-row {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n}\n\n.vtl-pagination {\n  margin: 2px 0;\n  white-space: nowrap;\n  justify-content: flex-end;\n  display: -ms-flexbox;\n  display: flex;\n  padding-left: 0;\n  list-style: none;\n  border-radius: 0.25rem;\n}\n\n.page-item.disabled .page-link {\n  color: #6c757d;\n  pointer-events: none;\n  cursor: auto;\n  background-color: #fff;\n  border-color: #dee2e6;\n}\n\n.page-item:first-child .page-link {\n  margin-left: 0;\n  border-top-left-radius: 0.25rem;\n  border-bottom-left-radius: 0.25rem;\n}\n\n.page-link {\n  position: relative;\n  display: block;\n  padding: 0.5rem 0.75rem;\n  margin-left: -1px;\n  line-height: 1.25;\n  color: #007bff;\n  background-color: #fff;\n  border: 1px solid #dee2e6;\n}\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n*,\n::after,\n::before {\n  box-sizing: border-box;\n}\n\n.col-sm-12 {\n  -ms-flex: 0 0 100%;\n  flex: 0 0 100%;\n  max-width: 100%;\n}\n\n.text-center {\n  text-align: center;\n}\n\n@media (min-width: 576px) {\n  .vtl-table-responsive-sm {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n  .vtl-table-responsive-sm > .table-bordered {\n    border: 0;\n  }\n  .col-md-4 {\n    -ms-flex: 0 0 33.333333%;\n    flex: 0 0 33.333333%;\n    max-width: 33.333333%;\n  }\n}\n\n.vtl-table thead th {\n  position: sticky;\n  top: 0;\n  z-index: 1;\n}\n.vtl-table tbody th {\n  position: sticky;\n  left: 0;\n  z-index: 1;\n}\n\n.fixed-first-column {\n  overflow-x: auto;\n}\n.fixed-first-column tr th:first-child {\n  position: sticky;\n  left: 0;\n  z-index: 2;\n}\n.fixed-first-column tr td:first-child {\n  position: sticky;\n  left: 0;\n}\n\n.fixed-first-column tr th:first-child::before,\n.fixed-first-second-column tr th:nth-child(2)::before {\n  content: \"\";\n  position: absolute;\n  border-right: 1px solid #454d55;\n  left: 0;\n  top: 0;\n  width: 102%;\n  height: 102%;\n}\n.fixed-first-column tr .vtl-checkbox-th:first-child::before {\n  content: \"\";\n  position: absolute;\n  border-right: 1px solid #454d55;\n  left: 0;\n  top: 0;\n  width: 103%;\n  height: 102%;\n}\n.fixed-first-column tr td:first-child::before,\n.fixed-first-column tr td:nth-child(2)::before {\n  content: \"\";\n  position: absolute;\n  border-right: 1px solid #dee2e6;\n  left: 0;\n  top: 0;\n  width: 102%;\n  height: 102%;\n}\n.fixed-first-column tr .vtl-checkbox-td:first-child::before {\n  content: \"\";\n  position: absolute;\n  border-right: 1px solid #dee2e6;\n  left: 0;\n  top: 0;\n  width: 103%;\n  height: 102%;\n}\n\n.fixed-first-second-column tr th:nth-child(2),\n.fixed-first-second-column tr td:nth-child(2) {\n  position: sticky;\n  left: 38px;\n}\n\n.fixed-first-second-column tr th:nth-child(2) {\n  z-index: 2;\n}\n\n.fixed-first-column tr td:first-child,\n.fixed-first-second-column tr td:nth-child(2) {\n  background-color: white;\n}\n\n.fixed-first-column tr.hover td:first-child,\n.fixed-first-second-column tr.hover td:nth-child(2) {\n  background-color: #ececec;\n}\n\n.flex {\n  display: flex;\n}\n.animation {\n  transform: rotate(0deg);\n  transition: transform 0.3s;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.rotated-90 {\n  transform: rotate(-90deg);\n}\n.hidden {\n  display: none;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n</style>\n","import { render } from \"./TableLite.vue?vue&type=template&id=cf2b586e&scoped=true\"\nimport script from \"./TableLite.vue?vue&type=script&lang=js\"\nexport * from \"./TableLite.vue?vue&type=script&lang=js\"\n\nimport \"./TableLite.vue?vue&type=style&index=0&id=cf2b586e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cf2b586e\"]])\n\nexport default __exports__","import { render } from \"./data-table.vue?vue&type=template&id=eb082f72\"\nimport script from \"./data-table.vue?vue&type=script&lang=js\"\nexport * from \"./data-table.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./data-table.vue?vue&type=template&id=7c581b03\"\nimport script from \"./data-table.vue?vue&type=script&lang=js\"\nexport * from \"./data-table.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// component to select station\n<template>\n  <v-autocomplete :items=\"options\" item-title=\"name\" item-value=\"id\" label=\"host\" v-model=\"selected\" :hint=\"selected ? selected.name : 'Select a host'\" persistent-hint return-object/>\n</template>\n<script>\n  // load host\n  import Host from '@/models/Host'\n  import {useRepo} from 'pinia-orm'\n  import {computed, defineComponent, ref, watch} from 'vue';\n  import {VAutocomplete} from 'vuetify/lib/components';\n  export default defineComponent({\n    name: \"SelectHost\",\n    components: {\n      VAutocomplete\n    },\n    emits: [\"update:modelValue\"],\n    setup(props, {emit}) {\n      const selected = ref(null);\n      const options = computed( () => { return useRepo(Host).all(); });\n      console.log( options );\n      const optionsHint = computed( () => {});\n      watch( () => selected.value, (newValue) => {\n        emit(\"update:modelValue\", newValue)\n      })\n      return {selected, options};\n    }\n  });\n</script>\n","import { render } from \"./select-host.vue?vue&type=template&id=173ea9cf\"\nimport script from \"./select-host.vue?vue&type=script&lang=js\"\nexport * from \"./select-host.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// component to select station\n<template>\n  <v-autocomplete :items=\"options\" item-title=\"id\" item-value=\"id\" label=\"observed property\" v-model=\"selected\" :hint=\"selected ? selected.standard_name : 'Select an observed property'\" persistent-hint return-object/>\n</template>\n<script>\n  // load host\n  import ObservedProperty from '@/models/ObservedProperty'\n  import {useRepo} from 'pinia-orm'\n  import {computed, defineComponent, ref, watch} from 'vue';\n  import {VAutocomplete} from 'vuetify/lib/components';\n  export default defineComponent({\n    name: \"SelectObservedProperty\",\n    components: {\n      VAutocomplete\n    },\n    emits: [\"update:modelValue\"],\n    setup(props, {emit}) {\n      const selected = ref(null);\n      const options = computed( () => { return useRepo(ObservedProperty).all(); });\n      console.log( options );\n      const optionsHint = computed( () => {});\n      watch( () => selected.value, (newValue) => {\n        emit(\"update:modelValue\", newValue)\n      })\n      return {selected, options};\n    }\n  });\n</script>\n","import { render } from \"./select-observed-property.vue?vue&type=template&id=06780395\"\nimport script from \"./select-observed-property.vue?vue&type=script&lang=js\"\nexport * from \"./select-observed-property.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/opencdms-app/opencdms-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_createVNode","_component_data_station","_createElementVNode","href","_createBlock","_component_v_container","style","_component_v_row","_component_v_col","cols","_component_v_card","_component_v_card_title","_component_v_card_text","_component_select_host","_ctx","host","key","params","id","_component_v_card_item","_component_select_observed_property","observed_property","_component_VueDatePicker","format","label","start_date","hint","teleport","end_date","_component_v_btn","onClick","_component_v_text_field","type","min","_component_v_card_subtitle","_hoisted_1","_component_VDataTable","items","headers","dense","small","item","raw","links","defineComponent","name","emits","props","isLoading","Boolean","require","isReSearch","hasCheckbox","default","checkedReturnType","String","title","isFixedFirstColumn","columns","Array","rows","rowClasses","Function","pageSize","Number","total","page","sortable","Object","order","sort","messages","pagingInfo","pageSizeChangeLabel","gotoPageLabel","noDataAvailable","isStaticMode","isSlotMode","isHidePaging","pageOptions","value","text","groupingKey","hasGroupToggle","groupingDisplay","maxHeight","startCollapsed","isKeepCollapsed","setup","emit","slots","localTable","ref","defaultPageSize","length","forEach","v","prototype","hasOwnProperty","call","setting","reactive","isCheckAll","keyColumn","computed","assign","col","isKey","field","maxPage","Math","floor","mod","offset","limit","paging","startPage","pages","i","push","isChecked","localRows","collator","Intl","Collator","undefined","numeric","sensitivity","sortOrder","a","b","compare","result","tmp","index","nextTick","callIsFinished","rowCheckbox","onBeforeUpdate","watch","state","tmpRows","slice","val","checked","row","event","stopPropagation","checkboxValue","target","indexOf","splice","clearChecked","doSort","changePage","prevPage","changePageSize","newPageSize","movePage","nextPage","stringFormat","template","args","replace","match","number","localElement","getElementsByClassName","toggleButtonRefs","groupingRowsRefs","groupingToggleStatus","groupingRows","groupIndex","el","entries","isOpen","parentElement","classList","contains","toggle","element","add","toggleGroup","targetEl","isClose","remove","addHoverClassToTr","mouseEvent","removeHoverClassFromTr","onMounted","components","VCard","VCardTitle","VCardSubtitle","VCardText","VCardItem","VTabs","VTab","VBtn","VTextField","VAutocomplete","VContainer","VCol","VRow","VDataTable","SelectHost","SelectObservedProperty","VueDatePicker","TableLite","methods","parseLinks","res","console","log","JSON","stringify","getIDLink","process","selectedHost","geom","useRouter","dataURL","baseURL","maxItems","search","useRoute","query_param","fetchData","async","response","loadData","then","flatten_geojson","features","onBeforeUnmount","query_watch","onUnmounted","downloadData","downloadURL","window","location","hostRepo","useRepo","Host","hostOptions","all","getDay","formatISO","deep","onErrorCaptured","DataStation","render","_component_v_autocomplete","selected","options","newValue","__exports__","standard_name","ObservedProperty"],"sourceRoot":""}