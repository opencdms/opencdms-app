"use strict";(self["webpackChunkopencdms_app"]=self["webpackChunkopencdms_app"]||[]).push([[2573],{2573:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var n=l(3396);function o(e,t,l,o,a,u){const r=(0,n.up)("geometry-picker"),i=(0,n.up)("v-col"),s=(0,n.up)("v-row"),d=(0,n.up)("v-container");return(0,n.wg)(),(0,n.j4)(d,{style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:a.geom,"onUpdate:modelValue":t[0]||(t[0]=e=>a.geom=e),style:{height:"100%"},onGeometrySelected:u.updateGeom},null,8,["modelValue","onGeometrySelected"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var a=l(3441),u=l(3238),r=l(6572),i=l(6422),s=l(2900),d=l(3369),c=l(6824),m=l(8521),p=l(5720),f={components:{GeometryPicker:a.Z,BaseMap:p.Z,VCard:u._,VCardTitle:r.E,VContainer:d.K,VRow:c.o,VCol:m.D,VForm:i.O,VTextField:s.hw},data(){return{geom:null}},methods:{updateGeom(e){console.log(e),this.geom=e}}},g=l(89);const v=(0,g.Z)(f,[["render",o]]);var y=v},3441:function(e,t,l){l.d(t,{Z:function(){return b}});var n=l(3396);function o(e,t,l,o,a,u){const r=(0,n.up)("v-card-title"),i=(0,n.up)("base-map"),s=(0,n.up)("v-card-text"),d=(0,n.up)("v-card"),c=(0,n.up)("v-col"),m=(0,n.up)("v-row"),p=(0,n.up)("v-text-field"),f=(0,n.up)("v-container");return(0,n.wg)(),(0,n.j4)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{style:{"min-height":"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Select location")])),_:1}),(0,n.Wm)(s,{style:{height:"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{onMapLoaded:e.onMapLoaded,onClick:e.selectGeometry},null,8,["onMapLoaded","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{cols:6},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Longitude",modelValue:e.geom.geometry.coordinates[0],"onUpdate:modelValue":t[0]||(t[0]=t=>e.geom.geometry.coordinates[0]=t),type:"number",hint:"Longitude (-180 to 180)","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(c,{cols:6},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Latitude",modelValue:e.geom.geometry.coordinates[1],"onUpdate:modelValue":t[1]||(t[1]=t=>e.geom.geometry.coordinates[1]=t),type:"number",hint:"Latitude (-90 to 90)","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"WKT",modelValue:e.geom.properties.wkt,"onUpdate:modelValue":t[2]||(t[2]=t=>e.geom.properties.wkt=t),hint:"autogenerated",readonly:"","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})}var a=l(3153),u=l.n(a),r=l(4870),i=l(3238),s=l(6572),d=l(6596),c=l(1888),m=l(3369),p=l(6824),f=l(8521),g=l(2900),v=l(9129),y=l(5720),w=(0,n.aZ)({name:"GeometryPicker",props:{geometry_type:{type:String,default:"point"},modelValue:{type:String,default:""}},components:{VCard:i._,VCardTitle:s.E,VCardItem:d._,VCardText:c.Z,VContainer:m.K,VRow:p.o,VCol:f.D,VTextField:g.hw,BaseMap:y.Z},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,r.iH)(!0),o=(0,r.iH)({type:"Feature",geometry:{type:"Point",coordinates:[null,null]},properties:{wkt:""}}),a=(0,r.iH)(null),i=(0,r.iH)(null),s=((0,r.iH)(""),async e=>{a.value=e,i.value=u().geoJSON().addTo(a.value),null!=o.value.geometry.coordinates[0]&null!=o.value.geometry.coordinates[1]&&(i.value.addData(o.value),a.value.setView([o.value.geometry.coordinates[1],o.value.geometry.coordinates[0]]))}),d=t=>{if(a.value.dragging._draggable._moved||!l.value)return;const n=a.value.mouseEventToLatLng(t);var u=new v.Wkt;"point"===e.geometry_type&&(o.value.geometry.coordinates=[n.lng,n.lat],u.read(JSON.stringify(o.value)),o.value.properties.wkt="SRID=4326; "+u.write(),c(a))};(0,n.YP)((()=>o),(e=>{var t=new v.Wkt;t.read(JSON.stringify(o.value)),o.value.properties.wkt="SRID=4326; "+t.write(),c(a)}),{deep:!0}),(0,n.YP)((()=>e.modelValue),(e=>{if(e){o.value.properties.wkt=e;const t=e.match(/POINT\(([-\d\.]+)\s+([-\d\.]+)\)/),l=[parseFloat(t[1]),parseFloat(t[2])];o.value.geometry.coordinates=l,a.value&&c(a)}}),{immediate:!0});const c=e=>{e.value&&null!=o.value.geometry.coordinates[0]&null!=o.value.geometry.coordinates[1]&&(i.value.clearLayers(),i.value.addData(o.value),e.value.setView([o.value.geometry.coordinates[1],o.value.geometry.coordinates[0]]),t("update:modelValue",o.value.properties.wkt))};return{map:a,onMapLoaded:s,selectGeometry:d,geom:o}}}),h=l(89);const V=(0,h.Z)(w,[["render",o]]);var b=V},6422:function(e,t,l){l.d(t,{O:function(){return s}});var n=l(3396),o=l(4357),a=l(3185),u=l(4870),r=l(320),i=l(9888);const s=(0,r.ev)()({name:"VForm",props:{...(0,o.vC)()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:l,emit:r}=t;const s=(0,o.Np)(e),d=(0,u.iH)();function c(e){e.preventDefault(),s.reset()}function m(e){const t=e,l=s.validate();t.then=l.then.bind(l),t.catch=l.catch.bind(l),t.finally=l.finally.bind(l),r("submit",t),t.defaultPrevented||l.then((e=>{let{valid:t}=e;t&&d.value?.submit()})),t.preventDefault()}return(0,i.L)((()=>(0,n.Wm)("form",{ref:d,class:"v-form",novalidate:!0,onReset:c,onSubmit:m},[l.default?.(s)]))),(0,a.F)(s,d)}})},8521:function(e,t,l){l.d(t,{D:function(){return f}});l(7658),l(8099);var n=l(1138),o=l(7139),a=l(3396),u=l(320);const r=["sm","md","lg","xl","xxl"],i=(()=>r.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),s=(()=>r.reduce(((e,t)=>(e["offset"+(0,o.kC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>r.reduce(((e,t)=>(e["order"+(0,o.kC)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(i),offset:Object.keys(s),order:Object.keys(d)};function m(e,t,l){let n=e;if(null!=l&&!1!==l){if(t){const l=t.replace(e,"");n+=`-${l}`}return"col"===e&&(n="v-"+n),"col"!==e||""!==l&&!0!==l?(n+=`-${l}`,n.toLowerCase()):n.toLowerCase()}}const p=["auto","start","end","center","baseline","stretch"],f=(0,u.ev)()({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...i,offset:{type:[String,Number],default:null},...s,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>p.includes(e)},...(0,n.Q)()},setup(e,t){let{slots:l}=t;const n=(0,a.Fl)((()=>{const t=[];let l;for(l in c)c[l].forEach((n=>{const o=e[n],a=m(l,n,o);a&&t.push(a)}));const n=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!n||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>(0,a.h)(e.tag,{class:n.value},l.default?.())}})},6824:function(e,t,l){l.d(t,{o:function(){return C}});l(7658),l(8099);var n=l(1138),o=l(7139),a=l(3396),u=l(320);const r=["sm","md","lg","xl","xxl"],i=["start","end","center"],s=["space-between","space-around","space-evenly"];function d(e,t){return r.reduce(((l,n)=>(l[e+(0,o.kC)(n)]=t(),l)),{})}const c=[...i,"baseline","stretch"],m=e=>c.includes(e),p=d("align",(()=>({type:String,default:null,validator:m}))),f=[...i,...s],g=e=>f.includes(e),v=d("justify",(()=>({type:String,default:null,validator:g}))),y=[...i,...s,"stretch"],w=e=>y.includes(e),h=d("alignContent",(()=>({type:String,default:null,validator:w}))),V={align:Object.keys(p),justify:Object.keys(v),alignContent:Object.keys(h)},b={align:"align",justify:"justify",alignContent:"align-content"};function k(e,t,l){let n=b[e];if(null!=l){if(t){const l=t.replace(e,"");n+=`-${l}`}return n+=`-${l}`,n.toLowerCase()}}const C=(0,u.ev)()({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:m},...p,justify:{type:String,default:null,validator:g},...v,alignContent:{type:String,default:null,validator:w},...h,...(0,n.Q)()},setup(e,t){let{slots:l}=t;const n=(0,a.Fl)((()=>{const t=[];let l;for(l in V)V[l].forEach((n=>{const o=e[n],a=k(l,n,o);a&&t.push(a)}));return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t}));return()=>(0,a.h)(e.tag,{class:["v-row",n.value]},l.default?.())}})}}]);
//# sourceMappingURL=2573.3d2bc800.js.map