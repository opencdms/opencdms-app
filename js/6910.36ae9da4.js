"use strict";(self["webpackChunkopencdms_app"]=self["webpackChunkopencdms_app"]||[]).push([[6910,1995],{6910:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var n=l(3396);function o(e,t,l,o,a,i){const u=(0,n.up)("Host",!0);return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(u)])}var a=l(7139);function i(e,t,l,o,i,u){const s=(0,n.up)("v-card-title"),r=(0,n.up)("v-text-field"),d=(0,n.up)("v-card-item"),m=(0,n.up)("LinkForm"),c=(0,n.up)("geometry-picker"),p=(0,n.up)("v-autocomplete"),v=(0,n.up)("VueDatePicker"),f=(0,n.up)("v-col"),h=(0,n.up)("v-row"),y=(0,n.up)("v-container"),_=(0,n.up)("v-form"),w=(0,n.up)("v-btn"),V=(0,n.up)("v-card-text"),g=(0,n.up)("v-card");return(0,n.wg)(),(0,n.j4)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.route.params.id?"Edit":"Create new")+" station details",1)])),_:1}),(0,n.Wm)(V,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"id",modelValue:e.host.id,"onUpdate:modelValue":t[0]||(t[0]=t=>e.host.id=t),hint:"ID / primary key","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"name",modelValue:e.host.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.host.name=t),hint:"Preferred name of host","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"description",modelValue:e.host.description,"onUpdate:modelValue":t[2]||(t[2]=t=>e.host.description=t),hint:"Description of host","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{links:e.host.links,onUpdateLinks:t[3]||(t[3]=t=>e.host.links=t)},null,8,["links"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.host.location,"onUpdate:modelValue":t[4]||(t[4]=t=>e.host.location=t),style:{height:"100%"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"elevation",modelValue:e.host.elevation,"onUpdate:modelValue":t[5]||(t[5]=t=>e.host.elevation=t),type:"number",hint:"Elevation of station above mean sea level in meters","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"wigos_station_identifier",modelValue:e.host.wigos_station_identifier,"onUpdate:modelValue":t[6]||(t[6]=t=>e.host.wigos_station_identifier=t),hint:"WIGOS station identifier","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.facilityTypeOptions,"item-title":"name","item-value":"id",label:"facility_type",modelValue:e.host.facility_type,"onUpdate:modelValue":t[7]||(t[7]=t=>e.host.facility_type=t),hint:e.facilityTypeOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{cols:4},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"date_established",modelValue:e.host.date_established,"onUpdate:modelValue":t[8]||(t[8]=t=>e.host.date_established=t),hint:"Date host was first established","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(f,{cols:4},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"date_closed",modelValue:e.host.date_closed,"onUpdate:modelValue":t[9]||(t[9]=t=>e.host.date_closed=t),hint:"Date host was first established","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.wmoRegionOptions,"item-title":"name","item-value":"id",label:"wmo_region",modelValue:e.host.wmo_region,"onUpdate:modelValue":t[10]||(t[10]=t=>e.host.wmo_region=t),hint:e.wmoRegionOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.territoryOptions,"item-title":"name","item-value":"id",label:"territory",modelValue:e.host.territory,"onUpdate:modelValue":t[11]||(t[11]=t=>e.host.territory=t),hint:e.territoryOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.timeZoneOptions,"item-title":"name","item-value":"id",label:"time_zone",modelValue:e.host.time_zone,"onUpdate:modelValue":t[12]||(t[12]=t=>e.host.time_zone=t),hint:e.timeZoneOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{cols:4},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"valid_from",modelValue:e.host.valid_from,"onUpdate:modelValue":t[13]||(t[13]=t=>e.host.valid_from=t),hint:"Date from which the details for this record are valid","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(f,{cols:4},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"valid_to",modelValue:e.host.valid_to,"onUpdate:modelValue":t[14]||(t[14]=t=>e.host.valid_to=t),hint:"Date after which the details for this record are no longer valid","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"_version",modelValue:e.host._version,"onUpdate:modelValue":t[15]||(t[15]=t=>e.host._version=t),type:"number",hint:"Version number of this record (autoupdated)","persistent-hint":"",readonly:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"_change_date",modelValue:e.host._change_date,"onUpdate:modelValue":t[16]||(t[16]=t=>e.host._change_date=t),hint:"Date this record was changed (autoupdated)","persistent-hint":"",readonly:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.userOptions,"item-title":"name","item-value":"id",label:"user",modelValue:e.host._user,"onUpdate:modelValue":t[17]||(t[17]=t=>e.host._user=t),hint:e.userOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{items:e.statusOptions,"item-title":"name","item-value":"id",label:"status",modelValue:e.host._status,"onUpdate:modelValue":t[18]||(t[18]=t=>e.host._status=t),hint:e.statusOptionsHint,"return-object":"","persistent-hint":""},null,8,["items","modelValue","hint"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"comments",modelValue:e.host.comments,"onUpdate:modelValue":t[19]||(t[19]=t=>e.host.comments=t),hint:"Free text comments on this record, for example description of changes made etc","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(w,{onClick:e.createHost},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.route.params.id?"Save":"Create"),1)])),_:1},8,["onClick"]),(0,n.Wm)(w,{onClick:e.cancelEdit},{default:(0,n.w5)((()=>[(0,n.Uk)("Cancel")])),_:1},8,["onClick"])])),_:1})])),_:1})}l(7658),l(774);var u=l(4870),s=l(3238),r=l(6572),d=l(1888),m=l(6596),c=l(2900),p=l(240),v=l(2650),f=l(6422),h=l(870),y=l(3369),_=l(8521),w=l(6824),V=l(3968),g=l(1995),W=l(8394),k=l(3441),b=l(2483),C=l(8573),F=l(4562),U=l(3423),O=l(7085),L=l(9597),S=l(2815),H=l(5206),x=(0,n.aZ)({name:"HostForm",props:{},methods:{parseLinks(e){let t;return t=e&&e.length>0?JSON.stringify(e):"",t}},components:{VCard:s._,VCardTitle:r.E,VCardText:d.Z,VCardItem:m._,VTextField:c.hw,VSelect:p.r,VAutocomplete:v.f,VForm:f.O,VBtn:h.T,VueDatePicker:W.Z,GeometryPicker:k.Z,LinkForm:g.Z,VContainer:y.K,VCol:_.D,VRow:w.o},setup(){const e=(0,b.yj)(),t=(0,b.tv)(),l=(0,u.iH)([]),o=e=>{console.log("updating links"),Z.value.links=e},a=(0,V.lL)(C.Z),i=(0,n.Fl)((()=>a.all())),s=(0,n.Fl)((()=>Z.value.facility_type?"description"in Z.value.facility_type?Z.value.facility_type.description:"":"Select facility_type")),r=(0,V.lL)(F.Z),d=(0,n.Fl)((()=>r.all())),m=(0,n.Fl)((()=>Z.value.wmo_region?"description"in Z.value.wmo_region?Z.value.wmo_region.description:"":"Select wmo_region")),c=(0,V.lL)(U.Z),p=(0,n.Fl)((()=>c.all())),v=(0,n.Fl)((()=>Z.value.territory?"description"in Z.value.territory?Z.value.territory.description:"":"Select territory")),f=(0,V.lL)(O.Z),h=(0,n.Fl)((()=>f.all())),y=(0,n.Fl)((()=>Z.value.time_zone?"description"in Z.value.time_zone?Z.value.time_zone.description:"":"Select time_zone")),_=(0,V.lL)(L.Z),w=(0,n.Fl)((()=>_.all())),g=(0,n.Fl)((()=>Z.value._user?"description"in Z.value._user?Z.value._user.description:"":"Select user")),W=(0,V.lL)(S.Z),k=(0,n.Fl)((()=>W.all())),x=(0,n.Fl)((()=>Z.value._status?"description"in Z.value._status?Z.value._status.description:"":"Select status")),D=(0,V.lL)(H.Z),Z=(0,u.iH)(null);console.log(e.params),e.params.id?(Z.value=(0,V.lL)(H.Z).with("territory").with("wmo_region").with("facility_type").with("time_zone").with("_user").with("_status").where("id",e.params.id).first(),console.log(Z.value)):Z.value=(0,V.lL)(H.Z).make();const T=async()=>{console.log("saving"),console.log(Z.value);let e={};Object.assign(e,Z.value),await D.save(e),t.push("/station/"+Z.value.id)},M=async()=>{t.push("/station/"+e.params.id)};(0,n.YP)(Z.value,(e=>{console.log(e)}));const j=()=>{Object.assign(Z.value,D.make())};return(0,n.bv)((()=>{e.params.id?Z.value._version=Z.value._version+1:(Z.value._version=1,Z.value._user=(0,V.lL)(L.Z).where("id","tag:beta.opencdms.org,2023:/data/user/default").first(),Z.value._status=(0,V.lL)(S.Z).where("id","tag:beta.opencdms.org,2023:/vocab/status/draft").first())})),{host:Z,createHost:T,cancelEdit:M,resetHost:j,links:l,updateLinks:o,facilityTypeOptions:i,facilityTypeOptionsHint:s,wmoRegionOptions:d,wmoRegionOptionsHint:m,territoryOptions:p,territoryOptionsHint:v,timeZoneOptions:h,timeZoneOptionsHint:y,userOptions:w,userOptionsHint:g,statusOptions:k,statusOptionsHint:x,route:e}}}),D=l(89);const Z=(0,D.Z)(x,[["render",i]]);var T=Z,M={name:"hostForm",components:{Host:T}};const j=(0,D.Z)(M,[["render",o]]);var I=j},1995:function(e,t,l){l.d(t,{Z:function(){return _}});var n=l(3396);function o(e,t,l,o,a,i){const u=(0,n.up)("v-card-title"),s=(0,n.up)("v-text-field"),r=(0,n.up)("v-col"),d=(0,n.up)("v-icon"),m=(0,n.up)("v-btn"),c=(0,n.up)("v-row"),p=(0,n.up)("v-container"),v=(0,n.up)("v-card"),f=(0,n.up)("v-form");return(0,n.wg)(),(0,n.j4)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Add / edit links")])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.links,((l,o)=>((0,n.wg)(),(0,n.j4)(v,{key:o},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{cols:"2"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{modelValue:l.rel,"onUpdate:modelValue":[e=>l.rel=e,t[0]||(t[0]=t=>e.value=t)],label:"rel",hint:"IANA link relation, e.g. canonical, alternate","persistent-hint":"",modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.Wm)(r,{cols:"3"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{modelValue:l.href,"onUpdate:modelValue":[e=>l.href=e,t[1]||(t[1]=t=>e.value=t)],label:"href",hint:"URL for link","persistent-hint":"",modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.Wm)(r,{cols:"2"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{modelValue:l.type,"onUpdate:modelValue":[e=>l.type=e,t[2]||(t[2]=t=>e.value=t)],label:"link type",hint:"Result/link type, e.g. text/html","persistent-hint":"",modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.Wm)(r,{cols:"4"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{modelValue:l.title,"onUpdate:modelValue":[e=>l.title=e,t[3]||(t[3]=t=>e.value=t)],label:"title",hint:"Title / name of link","persistent-hint":"",modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.Wm)(r,{cols:"1"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{color:"error",onClick:()=>e.removeLink(o)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-close")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,n.Wm)(m,{color:"green",onClick:e.addLink},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})}l(7658);var a=l(4870),i=l(6422),u=l(2900),s=l(3238),r=l(6572),d=l(870),m=l(3289),c=l(3369),p=l(6824),v=l(8521),f=(0,n.aZ)({name:"LinkForm",components:{VForm:i.O,VTextField:u.hw,VCard:s._,VCardTitle:r.E,VBtn:d.T,VIcon:m.t,VContainer:c.K,VRow:p.o,VCol:v.D},props:{links:{type:Array,required:!0}},emits:["updateLinks"],setup(e,t){const l=(0,a.iH)(""),o=(0,a.iH)(""),i=(0,a.iH)(e.links);(0,n.YP)((()=>e.links),(e=>{i.value="string"===typeof e?JSON.parse(e):e}),{immediate:!0,deep:!0}),(0,n.YP)((()=>i.value),(e=>{t.emit("updateLinks",e)}),{deep:!0});const u=()=>{i.value.push({rel:"",href:"",type:"",title:""})},s=e=>{i.value=i.value.filter(((t,l)=>l!==e))};return{name:l,description:o,location:location,links:i,addLink:u,removeLink:s}}}),h=l(89);const y=(0,h.Z)(f,[["render",o]]);var _=y},3441:function(e,t,l){l.d(t,{Z:function(){return g}});var n=l(3396);function o(e,t,l,o,a,i){const u=(0,n.up)("v-card-title"),s=(0,n.up)("base-map"),r=(0,n.up)("v-card-text"),d=(0,n.up)("v-card"),m=(0,n.up)("v-col"),c=(0,n.up)("v-row"),p=(0,n.up)("v-text-field"),v=(0,n.up)("v-container");return(0,n.wg)(),(0,n.j4)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{style:{"min-height":"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Select location")])),_:1}),(0,n.Wm)(r,{style:{height:"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{onMapLoaded:e.onMapLoaded,onClick:e.selectGeometry},null,8,["onMapLoaded","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{cols:6},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Longitude",modelValue:e.geom.geometry.coordinates[0],"onUpdate:modelValue":t[0]||(t[0]=t=>e.geom.geometry.coordinates[0]=t),type:"number",hint:"Longitude (-180 to 180)","persistent-hint":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(m,{cols:6},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Latitude",modelValue:e.geom.geometry.coordinates[1],"onUpdate:modelValue":t[1]||(t[1]=t=>e.geom.geometry.coordinates[1]=t),type:"number",hint:"Latitude (-90 to 90)","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{cols:12},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"WKT",modelValue:e.geom.properties.wkt,"onUpdate:modelValue":t[2]||(t[2]=t=>e.geom.properties.wkt=t),hint:"autogenerated",readonly:"","persistent-hint":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})}var a=l(3153),i=l.n(a),u=l(4870),s=l(3238),r=l(6572),d=l(6596),m=l(1888),c=l(3369),p=l(6824),v=l(8521),f=l(2900),h=l(9129),y=l(5720),_=(0,n.aZ)({name:"GeometryPicker",props:{geometry_type:{type:String,default:"point"},modelValue:{type:String,default:""}},components:{VCard:s._,VCardTitle:r.E,VCardItem:d._,VCardText:m.Z,VContainer:c.K,VRow:p.o,VCol:v.D,VTextField:f.hw,BaseMap:y.Z},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,u.iH)(!0),o=(0,u.iH)({type:"Feature",geometry:{type:"Point",coordinates:[null,null]},properties:{wkt:""}}),a=(0,u.iH)(null),s=(0,u.iH)(null),r=((0,u.iH)(""),async e=>{a.value=e,s.value=i().geoJSON().addTo(a.value),null!=o.value.geometry.coordinates[0]&null!=o.value.geometry.coordinates[1]&&(s.value.addData(o.value),a.value.setView([o.value.geometry.coordinates[1],o.value.geometry.coordinates[0]]))}),d=t=>{if(a.value.dragging._draggable._moved||!l.value)return;const n=a.value.mouseEventToLatLng(t);var i=new h.Wkt;"point"===e.geometry_type&&(o.value.geometry.coordinates=[n.lng,n.lat],i.read(JSON.stringify(o.value)),o.value.properties.wkt="SRID=4326; "+i.write(),m(a))};(0,n.YP)((()=>o),(e=>{var t=new h.Wkt;t.read(JSON.stringify(o.value)),o.value.properties.wkt="SRID=4326; "+t.write(),m(a)}),{deep:!0}),(0,n.YP)((()=>e.modelValue),(e=>{if(e){o.value.properties.wkt=e;const t=e.match(/POINT\(([-\d\.]+)\s+([-\d\.]+)\)/),l=[parseFloat(t[1]),parseFloat(t[2])];o.value.geometry.coordinates=l,a.value&&m(a)}}),{immediate:!0});const m=e=>{e.value&&null!=o.value.geometry.coordinates[0]&null!=o.value.geometry.coordinates[1]&&(s.value.clearLayers(),s.value.addData(o.value),e.value.setView([o.value.geometry.coordinates[1],o.value.geometry.coordinates[0]]),t("update:modelValue",o.value.properties.wkt))};return{map:a,onMapLoaded:r,selectGeometry:d,geom:o}}}),w=l(89);const V=(0,w.Z)(_,[["render",o]]);var g=V},2650:function(e,t,l){l.d(t,{f:function(){return b}});var n=l(3396),o=l(240),a=l(1550),i=l(7103),u=l(836),s=l(6052),r=l(9457),d=l(8971),m=l(2900),c=l(3185),p=l(1819),v=l(4906),f=l(4357),h=l(6185),y=l(1629),_=l(8717),w=l(4870),V=l(320),g=l(131),W=l(9888);function k(e,t,l){if(null==t)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return"number"===typeof t&&~t?(0,n.Wm)(n.HY,null,[(0,n.Wm)("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),(0,n.Wm)("span",{class:"v-autocomplete__mask"},[e.substr(t,l)]),(0,n.Wm)("span",{class:"v-autocomplete__unmask"},[e.substr(t+l)])]):e}const b=(0,V.ev)()({name:"VAutocomplete",props:{search:String,...(0,p.Up)({filterKeys:["title"]}),...(0,o.f)(),...(0,g.CE)((0,m.wG)({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...(0,v.X)({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:o}=(0,y.bU)(),v=(0,w.iH)(),V=(0,w.iH)(!1),b=(0,w.iH)(!0),C=(0,w.iH)(),F=(0,_.z)(e,"menu"),U=(0,n.Fl)({get:()=>F.value,set:e=>{F.value&&!e&&C.value?.ΨopenChildren||(F.value=e)}}),{items:O,transformIn:L,transformOut:S}=(0,h.Ce)(e),H=(0,_.z)(e,"search",""),x=(0,_.z)(e,"modelValue",[],(e=>L((0,g.FT)(e))),(t=>{const l=S(t);return e.multiple?l:l[0]??null})),D=(0,f.cI)(),{filteredItems:Z,getMatches:T}=(0,p.L0)(e,O,(0,n.Fl)((()=>b.value?void 0:H.value))),M=(0,n.Fl)((()=>x.value.map((t=>O.value.find((l=>e.valueComparator(l.value,t.value)))||t)))),j=(0,n.Fl)((()=>e.hideSelected?Z.value.filter((e=>!M.value.some((t=>t.value===e.value)))):Z.value)),I=(0,n.Fl)((()=>M.value.map((e=>e.props.value)))),z=(0,w.iH)();function K(t){e.openOnClear&&(U.value=!0),H.value=""}function P(){e.hideNoData&&!O.value.length||e.readonly||D?.isReadonly.value||(U.value=!0)}function E(t){e.readonly||D?.isReadonly.value||(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(U.value=!0),["Escape"].includes(t.key)&&(U.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(b.value=!0),"ArrowDown"===t.key?z.value?.focus("next"):"ArrowUp"===t.key&&z.value?.focus("prev"))}function N(e){H.value=e.target.value}function A(){V.value&&(b.value=!0)}function R(e){V.value=!0}function Y(e){null==e.relatedTarget&&v.value?.focus()}const G=(0,w.iH)(!1);function B(t){if(e.multiple){const l=I.value.findIndex((l=>e.valueComparator(l,t.value)));if(-1===l)x.value=[...x.value,t],H.value="";else{const e=[...x.value];e.splice(l,1),x.value=e}}else x.value=[t],G.value=!0,l.selection||(H.value=t.title),U.value=!1,b.value=!0,(0,n.Y3)((()=>G.value=!1))}return(0,n.YP)(V,(t=>{t?(G.value=!0,H.value=e.multiple||l.selection?"":String(M.value.at(-1)?.props.title??""),b.value=!0,(0,n.Y3)((()=>G.value=!1))):(U.value=!1,H.value="")})),(0,n.YP)(H,(e=>{V.value&&!G.value&&(e&&(U.value=!0),b.value=!e)})),(0,W.L)((()=>{const t=!(!e.chips&&!l.chip),c=!!(!e.hideNoData||j.value.length||l.prepend||l.append||l["no-data"]),[p]=(0,m.a)(e);return(0,n.Wm)(m.hw,(0,n.dG)({ref:v},p,{modelValue:H.value,"onUpdate:modelValue":e=>{null==e&&(x.value=[])},validationValue:x.externalValue,dirty:x.value.length>0,onInput:N,class:["v-autocomplete",{"v-autocomplete--active-menu":U.value,"v-autocomplete--chips":!!e.chips,["v-autocomplete--"+(e.multiple?"multiple":"single")]:!0,"v-autocomplete--selection-slot":!!l.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":K,"onMousedown:control":P,onFocus:()=>V.value=!0,onBlur:()=>V.value=!1,onKeydown:E}),{...l,default:()=>(0,n.Wm)(n.HY,null,[(0,n.Wm)(d.T,(0,n.dG)({ref:C,modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:A},e.menuProps),{default:()=>[c&&(0,n.Wm)(s.i,{ref:z,selected:I.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onFocusin:R,onFocusout:Y},{default:()=>[!j.value.length&&!e.hideNoData&&(l["no-data"]?.()??(0,n.Wm)(r.l,{title:o(e.noDataText)},null)),l["prepend-item"]?.(),j.value.map(((t,o)=>l.item?.({item:t,index:o,props:(0,n.dG)(t.props,{onClick:()=>B(t)})})??(0,n.Wm)(r.l,(0,n.dG)({key:o},t.props,{onClick:()=>B(t)}),{prepend:t=>{let{isSelected:l}=t;return e.multiple&&!e.hideSelected?(0,n.Wm)(a.pM,{modelValue:l,ripple:!1},null):void 0},title:()=>b.value?t.title:k(t.title,T(t)?.title,H.value?.length??0)}))),l["append-item"]?.()]})]}),M.value.map(((o,a)=>{function s(e){e.stopPropagation(),e.preventDefault(),B(o)}const r={"onClick:close":s,modelValue:!0,"onUpdate:modelValue":void 0};return(0,n.Wm)("div",{key:o.value,class:"v-autocomplete__selection"},[t?(0,n.Wm)(u.z,{defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[l.chip?l.chip({item:o,index:a,props:r}):(0,n.Wm)(i.v,r,null)]}):l.selection?l.selection({item:o,index:a}):(0,n.Wm)("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&a<M.value.length-1&&(0,n.Wm)("span",{class:"v-autocomplete__selection-comma"},[(0,n.Uk)(",")])])])}))])})})),(0,c.F)({isFocused:V,isPristine:b,menu:U,search:H,filteredItems:Z,select:B},v)}})},6422:function(e,t,l){l.d(t,{O:function(){return r}});var n=l(3396),o=l(4357),a=l(3185),i=l(4870),u=l(320),s=l(9888);const r=(0,u.ev)()({name:"VForm",props:{...(0,o.vC)()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:l,emit:u}=t;const r=(0,o.Np)(e),d=(0,i.iH)();function m(e){e.preventDefault(),r.reset()}function c(e){const t=e,l=r.validate();t.then=l.then.bind(l),t.catch=l.catch.bind(l),t.finally=l.finally.bind(l),u("submit",t),t.defaultPrevented||l.then((e=>{let{valid:t}=e;t&&d.value?.submit()})),t.preventDefault()}return(0,s.L)((()=>(0,n.Wm)("form",{ref:d,class:"v-form",novalidate:!0,onReset:m,onSubmit:c},[l.default?.(r)]))),(0,a.F)(r,d)}})},8521:function(e,t,l){l.d(t,{D:function(){return v}});l(7658),l(8099);var n=l(1138),o=l(7139),a=l(3396),i=l(320);const u=["sm","md","lg","xl","xxl"],s=(()=>u.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),r=(()=>u.reduce(((e,t)=>(e["offset"+(0,o.kC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>u.reduce(((e,t)=>(e["order"+(0,o.kC)(t)]={type:[String,Number],default:null},e)),{}))(),m={col:Object.keys(s),offset:Object.keys(r),order:Object.keys(d)};function c(e,t,l){let n=e;if(null!=l&&!1!==l){if(t){const l=t.replace(e,"");n+=`-${l}`}return"col"===e&&(n="v-"+n),"col"!==e||""!==l&&!0!==l?(n+=`-${l}`,n.toLowerCase()):n.toLowerCase()}}const p=["auto","start","end","center","baseline","stretch"],v=(0,i.ev)()({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...s,offset:{type:[String,Number],default:null},...r,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>p.includes(e)},...(0,n.Q)()},setup(e,t){let{slots:l}=t;const n=(0,a.Fl)((()=>{const t=[];let l;for(l in m)m[l].forEach((n=>{const o=e[n],a=c(l,n,o);a&&t.push(a)}));const n=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!n||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>(0,a.h)(e.tag,{class:n.value},l.default?.())}})},1819:function(e,t,l){l.d(t,{L0:function(){return d},Up:function(){return s}});l(7658);var n=l(3766),o=l(131),a=l(3396),i=l(4870);const u=(e,t,l)=>null==e||null==t?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),s=(0,n.U)({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function r(e,t,l){const n=[],a=l?.default??u,i=!!l?.filterKeys&&(0,o.FT)(l.filterKeys),s=Object.keys(l?.customKeyFilter??{}).length;if(!e?.length)return n;e:for(let u=0;u<e.length;u++){const r=e[u],d={},m={};let c=-1;if(t&&!l?.noFilter){if("object"===typeof r){const e=i||Object.keys(r);for(const n of e){const e=(0,o.qF)(r,n,r),i=l?.customKeyFilter?.[n];if(c=i?i(e,t,r):a(e,t,r),-1!==c&&!1!==c)i?d[n]=c:m[n]=c;else if("every"===l?.filterMode)continue e}}else c=a(r,t,r),-1!==c&&!1!==c&&(m.title=c);const e=Object.keys(m).length,n=Object.keys(d).length;if(!e&&!n)continue;if("union"===l?.filterMode&&n!==s&&!e)continue;if("intersection"===l?.filterMode&&(n!==s||!e))continue}n.push({index:u,matches:{...m,...d}})}return n}function d(e,t,l,n){const o=(0,a.Fl)((()=>"string"!==typeof l?.value&&"number"!==typeof l?.value?"":String(l.value))),u=(0,i.iH)([]),s=(0,i.iH)(new Map);function d(e){return s.value.get(e.value)}return(0,a.m0)((()=>{u.value=[],s.value=new Map;const l=(0,i.SU)(t),a=r(l,o.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:(0,i.SU)(n?.filterKeys)??e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter});a.forEach((e=>{let{index:t,matches:n}=e;const o=l[t];u.value.push(o),s.value.set(o.value,n)}))})),{filteredItems:u,filteredMatches:s,getMatches:d}}}}]);
//# sourceMappingURL=6910.36ae9da4.js.map